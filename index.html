<!doctype html>
<html lang="ja"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>長生村本郷Engineers&#039;Blog</title><meta description="tech"><meta property="og:type" content="blog"><meta property="og:title" content="長生村本郷Engineers&#039;Blog"><meta property="og:url" content="https://kenzo0107.github.io/"><meta property="og:site_name" content="長生村本郷Engineers&#039;Blog"><meta property="og:description" content="tech"><meta property="og:locale" content="ja_JP"><meta property="og:image" content="https://kenzo0107.github.io/img/og_image.png"><meta property="article:author" content="Kenzo Tanaka"><meta property="article:tag" content="aws golang"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://kenzo0107.github.io"},"headline":"長生村本郷Engineers'Blog","image":["https://kenzo0107.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Kenzo Tanaka"},"description":"tech"}</script><link rel="alternative" href="/atom.xml" title="長生村本郷Engineers&#039;Blog" type="application/atom+xml"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-162026478-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-162026478-1');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="ca-pub-6265337967545472" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="長生村本郷Engineers&#039;Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/2013/12/31/PrivacyPolicy/">PrivacyPolicy</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/kenzo0107"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><a class="image" href="/2022/10/30/2022-10-31-js-get-a-last-month/"><img class="thumbnail" src="https://i.imgur.com/VbLapz4.png" alt="JavaScript で日付計算の妙"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2022-10-30T15:00:00.000Z" title="2022-10-30T15:00:00.000Z">2022-10-31</time><span class="level-item">2分 read (About 286 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/10/30/2022-10-31-js-get-a-last-month/">JavaScript で日付計算の妙</a></h1><div class="content"><p>問題です。以下コードを実行した際に何と出力されるでしょう？<br>先月の 1 日を取得したい気持ちです。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let dt &#x3D; new Date(&#39;2022-10-31T15:00:00+0900&#39;);</span><br><span class="line">dt.setMonth(dt.getMonth() - 1);</span><br><span class="line">dt.setDate(1)</span><br><span class="line">console.log(dt); &#x2F;&#x2F; &#x3D;&gt; ?</span><br></pre></td></tr></table></figure>

<p>答えは <code>2022-10-01T06:00:00.000Z</code> です。</p>
<p>10 月 31 日の 1 ヶ月前は 9 月 31 日、<br>9 月は 30 日までなのでその翌日の 10 月 1 日になってしまったというものです。</p>
<p>先月の 1 日を取得する場合は先に <code>setDate(1)</code> が必要です。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let dt &#x3D; new Date(&#39;2022-10-31T15:00:00+0900&#39;);</span><br><span class="line">dt.setDate(1)</span><br><span class="line">dt.setMonth(dt.getMonth() - 1);</span><br><span class="line">console.log(dt); &#x2F;&#x2F; &#x3D;&gt; 2022-09-01T06:00:00.000Z</span><br></pre></td></tr></table></figure>

<p>ちなみに先月の月末は <code>setDate(0)</code> することで取得できます。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let dt &#x3D; new Date(&#39;2022-10-31T15:00:00+0900&#39;);</span><br><span class="line">dt.setDate(0);</span><br><span class="line">console.log(dt); &#x2F;&#x2F; &#x3D;&gt; 2022-09-30T06:00:00.000Z</span><br></pre></td></tr></table></figure>

<p>Lambda で 10 月 31 日の本日に 1 ヶ月前が取得できないな？となってちょっとハマってしまった問題でした。<br>terraform で簡易的な Lambda スクリプトを管理しており、極力 package を利用せずに nodejs で日付計算したかった背景があります。</p>
<p>以上<br>参考になれば幸いです。</p>
</div></article></div><div class="card"><div class="card-image"><a class="image" href="/2022/10/25/2022-10-26-terraform-sort-map/"><img class="thumbnail" src="https://i.imgur.com/8cuKRz1.png" alt="terraform で map 型の値を key 順にソートした上で value のリストを取得する"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2022-10-25T15:00:00.000Z" title="2022-10-25T15:00:00.000Z">2022-10-26</time><span class="level-item"><a class="link-muted" href="/categories/Terraform/">Terraform</a></span><span class="level-item">2分 read (About 287 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/10/25/2022-10-26-terraform-sort-map/">terraform で map 型の値を key 順にソートした上で value のリストを取得する</a></h1><div class="content"><p>terraform で map 型を for で整形した際に key を昇順にソートして並べてくれます。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt; &#123;for k, v in &#123;&quot;a&quot;:3, &quot;c&quot;:2, &quot;d&quot;:1&#125;: v &#x3D;&gt; k&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;1&quot; &#x3D; &quot;d&quot;</span><br><span class="line">  &quot;2&quot; &#x3D; &quot;c&quot;</span><br><span class="line">  &quot;3&quot; &#x3D; &quot;a&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&gt; values(&#123;for k, v in &#123;&quot;a&quot;:3, &quot;c&quot;:2, &quot;d&quot;:1&#125;: v &#x3D;&gt; k&#125;)</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">  &quot;d&quot;,</span><br><span class="line">  &quot;c&quot;,</span><br><span class="line">  &quot;a&quot;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>これを利用し、data リソースで取得した Subnet ID を AZ 順 (a → c → d) に list で取得してみます。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">data &quot;aws_subnets&quot; &quot;public&quot; &#123;</span><br><span class="line">  filter &#123;</span><br><span class="line">    name   &#x3D; &quot;vpc-id&quot;</span><br><span class="line">    values &#x3D; [&quot;xxxxx&quot;]</span><br><span class="line">  &#125;</span><br><span class="line">  filter &#123;</span><br><span class="line">    name   &#x3D; &quot;tag:Name&quot;</span><br><span class="line">    values &#x3D; [&quot;public-*&quot;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">data &quot;aws_subnet&quot; &quot;public&quot; &#123;</span><br><span class="line">  for_each &#x3D; toset(data.aws_subnets.public.ids)</span><br><span class="line"></span><br><span class="line">  id &#x3D; each.value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">values(&#123; for id, s in data.aws_subnet.public : s.availability_zone &#x3D;&gt; id &#125;)</span><br><span class="line"># [</span><br><span class="line">#   &quot;subnet-xxx&quot;, # ap-northeast-1a</span><br><span class="line">#   &quot;subnet-yyy&quot;, # ap-northeast-1c</span><br><span class="line">#   &quot;subnet-zzz&quot;, # ap-northeast-1d</span><br><span class="line"># ]</span><br></pre></td></tr></table></figure>

<p>以下の様に EC2 インスタンスを 10 台起動するときに Subnet の AZ を a, c, d と順々に振り分けたい場合などに便利です。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">locals &#123;</span><br><span class="line">    az_count &#x3D; length(data.aws_availability_zones.available.names)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resource &quot;aws_instance&quot; &quot;app&quot; &#123;</span><br><span class="line">  count &#x3D; 10</span><br><span class="line"></span><br><span class="line">  # NOTE: map 型にすることで key の昇順で並ぶことを利用し AZ を a → c → d と並べている</span><br><span class="line">  subnet_id &#x3D; values(&#123; for id, s in data.aws_subnet.public : s.availability_zone &#x3D;&gt; id &#125;)[count.index % local.az_count]</span><br></pre></td></tr></table></figure>

<p>以上、参考になれば幸いです。</p>
</div></article></div><div class="card"><div class="card-image"><a class="image" href="/2022/09/28/2022-09-29-upgrade_elasticache_redis/"><img class="thumbnail" src="https://i.imgur.com/6PU8EYE.png" alt="AWS ElastiCache Redis バージョンアップ&amp;ノードタイプ変更時の注意点"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2022-09-28T15:00:00.000Z" title="2022-09-28T15:00:00.000Z">2022-09-29</time><span class="level-item">3分 read (About 443 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/09/28/2022-09-29-upgrade_elasticache_redis/">AWS ElastiCache Redis バージョンアップ&amp;ノードタイプ変更時の注意点</a></h1><div class="content"><p>AWS より cache.m3 系から cache.m5 系へのアップグレードを促されました。</p>
<blockquote>
<p>One or more of your Amazon ElastiCache clusters is running on our previous generation node type cache.m3.medium. We strongly recommend that you migrate to one of our latest generation node types, and with ElastiCache it is fast and easy to choose a new instance type for your cluster.</p>
<p>Our latest generation node types offer benefits such as better price per compute performance, higher-performing CPUs, improved memory, network performance, and ElastiCache optimizations such as enhanced I/O that provides improved throughput per node.</p>
<p>Migration to the latest generation node types is available via our scale-up feature. To scale up your cluster:<br>First, determine the best upgrade path from your previous generation node type(s) to the latest generation, see <a href="https://aws.amazon.com/elasticache/previous-generation">https://aws.amazon.com/elasticache/previous-generation</a></p>
</blockquote>
<p>アップグレード時の注意事項をまとめます。</p>
<h2><span id="結論">結論</span></h2><ol>
<li>Redis のスナップショットを取る</li>
<li>スナップショットを元に希望のバージョン・ノードタイプの Redis を作成</li>
<li>アプリケーションのエンドポイントを変更</li>
</ol>
<p>バージョンアップ時に再作成となる場合があり上記の対応を取りました。<br>※ terraform plan でバージョン変更時に再作成となったことで発覚し、コンソール上で試しても実行できないことがわかった。</p>
<p>また、ノードタイプの変更時のデータ保持はベストエフォートとなる為、欠損する可能性があります。<br>その為、Redis にアクセスされない状態にした上でスナップショットを取り、それを元に新たに Redis を作成することで対応しました。</p>
<p>以上<br>参考になれば幸いです。</p>
</div></article></div><div class="card"><div class="card-image"><a class="image" href="/2022/09/12/2022-09-13-setup-tfsec/"><img class="thumbnail" src="https://aquasecurity.github.io/tfsec/v0.63.1/imgs/homelogo.png" alt="tfsec で terraform 管理リソースのセキュリティ強化"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2022-09-12T15:00:00.000Z" title="2022-09-12T15:00:00.000Z">2022-09-13</time><span class="level-item">6分 read (About 918 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/09/12/2022-09-13-setup-tfsec/">tfsec で terraform 管理リソースのセキュリティ強化</a></h1><div class="content"><div class="toc">
<div class="toc-content">
<h3 class="menu-label"><span id="toc">ToC</span></h3>

<!-- toc -->

<ul>
<li><a href="#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%AB-tfsec-%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB">ローカルに tfsec インストール</a></li>
<li><a href="#%E5%80%8B%E3%80%85%E3%81%AE%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%A7%E3%83%AB%E3%83%BC%E3%83%AB%E3%82%92%E9%99%A4%E5%A4%96%E3%81%97%E3%81%9F%E3%81%84%E3%81%A8%E3%81%8D">個々のリソースでルールを除外したいとき</a></li>
<li><a href="#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E5%85%A8%E4%BD%93%E3%81%A7%E3%83%AB%E3%83%BC%E3%83%AB%E3%82%92%E9%99%A4%E5%A4%96%E3%81%97%E3%81%9F%E3%81%84%E3%81%A8%E3%81%8D">プロジェクト全体でルールを除外したいとき</a></li>
<li><a href="#github-actions-%E3%81%A7%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B">GitHub Actions で実行する</a></li>
<li><a href="#%E3%81%BE%E3%81%A8%E3%82%81">まとめ</a></li>
</ul>
<!-- tocstop -->

</div>
</div>

<hr>
<p><a href="https://github.com/aquasecurity/tfsec">tfsec</a> を使用し <a href="https://www.terraform.io/">Terraform</a> で管理するリソースのセキュリティを強化する手順を記載します。</p>
<h2><span id="ローカルに-tfsec-インストール">ローカルに tfsec インストール</span></h2><p>以下例では <a href="https://github.com/asdf-vm/asdf">asdf</a> を利用し導入しています。<br>asdf は多数言語に対応しており、 rubyenv, nodenv, goenv の様な個々の言語のバージョン切り替えよりも同様の手順でバージョン切り替えが可能で有用です。</p>
<p>参考: <a href="https://github.com/woneill/asdf-tfsec">https://github.com/woneill/asdf-tfsec</a></p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">asdf plugin-add tfsec https://github.com/woneill/asdf-tfsec</span><br><span class="line"></span><br><span class="line">管理バージョン表示</span><br><span class="line">asdf list all tfsec</span><br><span class="line">...</span><br><span class="line">1.27.4</span><br><span class="line">1.27.5</span><br><span class="line">1.27.6</span><br><span class="line"></span><br><span class="line">asdf install tfsec 1.27.6</span><br><span class="line"></span><br><span class="line">// ローカルの設定</span><br><span class="line">asdf local tfsec 1.27.6</span><br><span class="line"></span><br><span class="line">// 上記処理で .tool-versions に `tfsec 1.27.6` が追記される</span><br><span class="line">cat .tool-versions</span><br></pre></td></tr></table></figure>

<h2><span id="個々のリソースでルールを除外したいとき">個々のリソースでルールを除外したいとき</span></h2><p>各リソースで <code>tfsec:ignore</code> でルールを除外します。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">resource &quot;aws_lb&quot; &quot;dummy&quot; &#123;</span><br><span class="line">  internal &#x3D; false # tfsec:ignore:aws-elb-alb-not-public インターネットからのアクセスをする為、許容する</span><br></pre></td></tr></table></figure>

<p>以下の様にリソースの上にコメントして追記しても除外が可能ですが、<br>複数ある場合に見づらくなる為、個人的には上記の各パラメータに設定する方が見通しが良くなると考えております。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># tfsec:ignore:aws-elb-alb-not-public インターネットからのアクセスをする為、許容する</span><br><span class="line">resource &quot;aws_lb&quot; &quot;dummy&quot; &#123;</span><br><span class="line">  internal &#x3D; false</span><br></pre></td></tr></table></figure>

<h2><span id="プロジェクト全体でルールを除外したいとき">プロジェクト全体でルールを除外したいとき</span></h2><p>参考: <a href="https://aquasecurity.github.io/tfsec/v1.27.6/getting-started/configuration/config/">https://aquasecurity.github.io/tfsec/v1.27.6/getting-started/configuration/config/</a></p>
<p>.tfsec/config.yml を作成し、除外したいルールを追加します。<br>あくまでも以下はサンプルで、個々の運用によって除外ルールは変更してください。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">exclude:</span><br><span class="line">  # NOTE: IAM Policy で * (ワイルドカード) の使用を回避すると工数増となり対応が難しくなることが多い為、除外する</span><br><span class="line">  - aws-iam-no-policy-wildcards</span><br><span class="line"></span><br><span class="line">  # ALB を internet-facing で利用したい場合が主なので除外する</span><br><span class="line">  - aws-elb-alb-not-public</span><br></pre></td></tr></table></figure>

<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// tfsec 実行ディレクトリを ./envs/prd としています。</span><br><span class="line">tfsec --config-file .tfsec/config.yml ./envs/prd</span><br></pre></td></tr></table></figure>

<h2><span id="github-actions-で実行する">GitHub Actions で実行する</span></h2><p>Pull Request 作成時をトリガーに tfsec が実行される様になります。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">name: tfsec</span><br><span class="line"></span><br><span class="line">on: [pull_request]</span><br><span class="line"></span><br><span class="line">jobs:</span><br><span class="line">  tfsec:</span><br><span class="line">    name: tfsec</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    timeout-minutes: 3</span><br><span class="line"></span><br><span class="line">    strategy:</span><br><span class="line">      fail-fast: false</span><br><span class="line">      matrix:</span><br><span class="line">        directory: [&#39;envs&#x2F;prd&#39;, &#39;envs&#x2F;stg&#39;]</span><br><span class="line"></span><br><span class="line">    steps:</span><br><span class="line">      - name: Checkout</span><br><span class="line">        uses: actions&#x2F;checkout@v3</span><br><span class="line"></span><br><span class="line">      - name: Pick tfsec version</span><br><span class="line">        id: tfsec</span><br><span class="line">        run: echo ::set-output name&#x3D;tfsec_version::$(grep tfsec .tool-versions| awk &#39;&#123;print $2&#125;&#39;)</span><br><span class="line"></span><br><span class="line">      - name: install tfsec</span><br><span class="line">        run: |</span><br><span class="line">          curl -L https:&#x2F;&#x2F;github.com&#x2F;tfsec&#x2F;tfsec&#x2F;releases&#x2F;download&#x2F;v$&#123;&#123; steps.tfsec.outputs.tfsec_version &#125;&#125;&#x2F;tfsec-linux-amd64 &gt; &#x2F;tmp&#x2F;tfsec</span><br><span class="line">          chmod +x &#x2F;tmp&#x2F;tfsec</span><br><span class="line">          sudo mv &#x2F;tmp&#x2F;tfsec &#x2F;usr&#x2F;local&#x2F;bin</span><br><span class="line"></span><br><span class="line">      - name: Terraform security scan</span><br><span class="line">        run: tfsec --config-file .tfsec&#x2F;config.yml $&#123;&#123; matrix.directory &#125;&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="まとめ">まとめ</span></h2><p>tfsec を導入することで AWS Config 非準拠ルールへの対応の数多くが実行でき、よりセキュアなアーキテクチャ構築に寄与できます。<br>Pull Request で tfsec をパスしないとマージできない様にすることで運用ルールとして自動的に適用できるのでよりお勧めです。</p>
<p>そして、 SaaS のサービスは日々進化しており、 tfsec もそれに追従しています。<br>tfsec の定期的なバージョンアップが必須なのでお気をつけください。</p>
<p>以上<br>参考になれば幸いです。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2022-08-23T15:00:00.000Z" title="2022-08-23T15:00:00.000Z">2022-08-24</time><span class="level-item">1分 read (About 198 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/08/23/2022-08-24-setup-nodejs-on-alpine/">マルチステージビルドで alpine イメージに nodejs をセットアップする</a></h1><div class="content"><div class="toc">
<div class="toc-content">
<h3 class="menu-label"><span id="toc">ToC</span></h3>

<!-- toc -->



<!-- tocstop -->

</div>
</div>

<hr>
<p>php の alpine ベースイメージに nodejs をセットアップする場合、<br><code>apk add nodejs</code> でインストールも可能ですが、<br>マルチステージビルドで node の alpine イメージから node を動作させるのに必要なファイルをコピーすることで実現可能なので設定がシンプルです。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">FROM node:16.15.1-alpine AS node</span><br><span class="line"></span><br><span class="line">FROM php:8.0.19-fpm-alpine AS main</span><br><span class="line"></span><br><span class="line"># node イメージから nodejs セットアップに必要なファイルをコピー</span><br><span class="line">COPY --from&#x3D;node &#x2F;usr&#x2F;lib &#x2F;usr&#x2F;lib</span><br><span class="line">COPY --from&#x3D;node &#x2F;usr&#x2F;local&#x2F;share &#x2F;usr&#x2F;local&#x2F;share</span><br><span class="line">COPY --from&#x3D;node &#x2F;usr&#x2F;local&#x2F;lib &#x2F;usr&#x2F;local&#x2F;lib</span><br><span class="line">COPY --from&#x3D;node &#x2F;usr&#x2F;local&#x2F;include &#x2F;usr&#x2F;local&#x2F;include</span><br><span class="line">COPY --from&#x3D;node &#x2F;usr&#x2F;local&#x2F;bin &#x2F;usr&#x2F;local&#x2F;bin</span><br></pre></td></tr></table></figure>

<p>以上<br>参考になれば幸いです。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2022-08-20T15:00:00.000Z" title="2022-08-20T15:00:00.000Z">2022-08-21</time><span class="level-item">2分 read (About 348 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/08/20/2022-08-21-install-ebitengine-on-mac/">ebitengine インストール時に Xcode ライセンスに同意しておきましょう</a></h1><div class="content"><div class="toc">
<div class="toc-content">
<h3 class="menu-label"><span id="toc">ToC</span></h3>

<!-- toc -->

<ul>
<li><a href="#%E6%A6%82%E8%A6%81">概要</a></li>
<li><a href="#%E5%AE%9F%E8%A1%8C%E7%92%B0%E5%A2%83">実行環境</a></li>
<li><a href="#ebiten-%E5%B0%8E%E5%85%A5%E6%99%82%E3%81%AB%E3%82%A8%E3%83%A9%E3%83%BC">ebiten 導入時にエラー</a></li>
<li><a href="#%E5%86%8D%E5%BA%A6%E5%AE%9F%E8%A1%8C">再度実行</a></li>
</ul>
<!-- tocstop -->

</div>
</div>

<hr>
<h2><span id="概要">概要</span></h2><p><a href="https://ebiten.org/documents/install.html?os=darwin">公式 ebitengine インストール</a> の通り、<br>MacOS で ebitengine 導入時に一手間あったので備忘録</p>
<h2><span id="実行環境">実行環境</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sw_vers</span><br><span class="line"></span><br><span class="line">ProductName:    macOS</span><br><span class="line">ProductVersion: 11.6.3</span><br><span class="line">BuildVersion:   20G415</span><br></pre></td></tr></table></figure>

<h2><span id="ebiten-導入時にエラー">ebiten 導入時にエラー</span></h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> go get github.com/hajimehoshi/ebiten/v2</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> github.com/go-gl/glfw/v3.3/glfw</span></span><br><span class="line"></span><br><span class="line">You have not agreed to the Xcode license agreements, please run 'sudo xcodebuild -license' from within a Terminal window to review and agree to the Xcode license agreements.</span><br><span class="line"><span class="meta">#</span><span class="bash"> github.com/hajimehoshi/ebiten/v2/internal/graphicsdriver/metal/mtl</span></span><br><span class="line"></span><br><span class="line">You have not agreed to the Xcode license agreements, please run 'sudo xcodebuild -license' from within a Terminal window to revi</span><br><span class="line">ew and agree to the Xcode license agreements.</span><br></pre></td></tr></table></figure>

<p>上記エラー文の通り、Xcode ライセンスに同意します。</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo xcodebuild -license</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">By typing 'agree' you are agreeing to the terms of the software license agreements. Type 'print' to print them or anything else</span><br><span class="line">to cancel, [agree, print, cancel] (agree と入力し実行)</span><br></pre></td></tr></table></figure>

<h2><span id="再度実行">再度実行</span></h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> go get github.com/hajimehoshi/ebiten/v2</span></span><br><span class="line">go get: added github.com/go-gl/glfw/v3.3/glfw v0.0.0-20220320163800-277f93cfa958</span><br><span class="line">go get: added github.com/gofrs/flock v0.8.1</span><br><span class="line">go get: added github.com/hajimehoshi/ebiten/v2 v2.3.7</span><br><span class="line">go get: added github.com/jezek/xgb v1.0.0</span><br><span class="line">go get: added golang.org/x/exp v0.0.0-20190731235908-ec7cb31e5a56</span><br><span class="line">go get: added golang.org/x/image v0.0.0-20220321031419-a8550c1d254a</span><br><span class="line">go get: added golang.org/x/mobile v0.0.0-20220518205345-8578da9835fd</span><br><span class="line">go get: added golang.org/x/sync v0.0.0-20210220032951-036812b2e83c</span><br><span class="line">go get: added golang.org/x/sys v0.0.0-20220408201424-a24fb2fb8a0f</span><br></pre></td></tr></table></figure>

<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> go run -tags=example github.com/hajimehoshi/ebiten/v2/examples/rotate</span></span><br></pre></td></tr></table></figure>

<p><img src="https://i.imgur.com/4It5iQF.png"></p>
<p>できた ♪</p>
<p>以上<br>参考になれば幸いです。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2022-08-09T15:00:00.000Z" title="2022-08-09T15:00:00.000Z">2022-08-10</time><span class="level-item"><a class="link-muted" href="/categories/RaspberryPI/">RaspberryPI</a></span><span class="level-item">4分 read (About 545 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/08/09/2022-08-10-raspberrypi-bullseye-opencv-setup/">RPi opencv で笑顔検知して Slack に通知するカメラを作った</a></h1><div class="content"><div class="toc">
<div class="toc-content">
<h3 class="menu-label"><span id="toc">ToC</span></h3>

<!-- toc -->

<ul>
<li><a href="#%E6%A6%82%E8%A6%81">概要</a></li>
<li><a href="#bullseye-64-bit-with-desktop-%E3%82%92%E9%81%B8%E6%8A%9E">bullseye 64-bit with Desktop を選択</a></li>
<li><a href="#%E6%89%8B%E9%A0%86">手順</a></li>
<li><a href="#%E7%B7%8F%E8%A9%95">総評</a></li>
</ul>
<!-- tocstop -->

</div>
</div>

<hr>
<h2><span id="概要">概要</span></h2><p>以前 RPi bullseye でカメラモジュール周りの設定が変わったことについて記載させていただきました。</p>
<a href="https://kenzo0107.github.io/2022/07/29/2022-07-30-fix-the-system-should-be-configured-for-the-legacy-camera-stack/" class="link-preview"><div class="link-area"><div class="og-image"><img src="https://kenzo0107.github.io/img/og_image.png"></div><div class="descriptions"><div class="og-title">fix the system should be configured for the legacy camera stack</div><div class="og-description">ToC     概要 libcamera を利用しよう legacy camera stack をサポートしても良し        概要Raspberry PI bullseye で raspistill -o test.jpg 実行時に掲題のエラーが発生しました。 123$ r…</div></div></div></a>

<p>RPi で opencv をセットアップする記事をネット上でいくつか見ましたが<br>bullseye より前のバージョンでの場合が多く、うまくいかないということが多かったです。</p>
<p>その為、 bullseye での設定をまとめます。</p>
<h2><span id="bullseye-64-bit-with-desktop-を選択">bullseye 64-bit with Desktop を選択</span></h2><p><code>64-bit</code> の <code>Desktop</code> ありを選択しました。</p>
<p>ヘッドレスでも良かったのですが、RPi に接続したモニターに検知する顔を写しながら opencv を使いたかったので Desktop にしました。</p>
<p>実施した環境として OS 情報を記載しておきます。</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> lsb_release -a</span></span><br><span class="line"></span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID: Debian</span><br><span class="line">Description:    Debian GNU/Linux 11 (bullseye)</span><br><span class="line">Release:        11</span><br><span class="line">Codename:       bullseye</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> uname -a</span></span><br><span class="line"></span><br><span class="line">Linux pi3b-smile 5.15.32-v8+ #1538 SMP PREEMPT Thu Mar 31 19:40:39 BST 2022 aarch64 GNU/Linux</span><br></pre></td></tr></table></figure>

<h2><span id="手順">手順</span></h2><p>コマンドで以下実行します。</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">sudo raspi-config</span><br><span class="line"></span><br><span class="line">// Interface Options を選択</span><br><span class="line">// Legacy Camera Enable/disable legacy camera support</span><br><span class="line"></span><br><span class="line">// Legacy Camera を有効化し RPi を再起動します</span><br><span class="line"></span><br><span class="line">// ↓↓↓再起動後↓↓↓</span><br><span class="line"></span><br><span class="line">// 顔認識で使う以下パッケージをインストール</span><br><span class="line">sudo apt install libatlas-base-dev libqt4-test libjasper1 libhdf5-dev</span><br><span class="line"></span><br><span class="line">// contrib モジュール入り opencv インストール</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo pip install opencv-contrib-python</span></span><br><span class="line"></span><br><span class="line">// opencv インストールできたか確認</span><br><span class="line"><span class="meta">$</span><span class="bash"> python</span></span><br><span class="line">// cv2 呼び出しができエラーが出ないこと</span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; import cv2</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt; cv2.__version__</span></span><br><span class="line">'4.6.0'</span><br><span class="line"></span><br><span class="line">// OpenCV で顔検知・認識のサンプルがまとまっている Git リポジトリ取得</span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/Mjrovai/OpenCV-Face-Recognition</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> OpenCV-Face-Recognition/FaceDetection/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> python faceDetection.py</span></span><br></pre></td></tr></table></figure>

<h2><span id="総評">総評</span></h2><p>bullseye でカメラ周りの変更があったのでなかなか opencv の設定がうまくいかなかったのですが、最終的に非常にシンプルにできることがわかりました。</p>
<p>以上<br>参考になれば幸いです。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2022-08-04T15:00:00.000Z" title="2022-08-04T15:00:00.000Z">2022-08-05</time><span class="level-item"><a class="link-muted" href="/categories/AWS/">AWS</a></span><span class="level-item">2分 read (About 287 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/08/04/2022-08-05-lake-formation-incremental-database-issue/">Lake Formation で生成される Python スクリプトが動作しないので修正した</a></h1><div class="content"><div class="toc">
<div class="toc-content">
<h3 class="menu-label"><span id="toc">ToC</span></h3>

<!-- toc -->

<ul>
<li><a href="#%E6%A6%82%E8%A6%81">概要</a></li>
<li><a href="#%E3%81%BE%E3%81%9A%E7%B5%90%E8%AB%96">まず結論</a></li>
<li><a href="#%E3%81%BE%E3%81%A8%E3%82%81">まとめ</a></li>
</ul>
<!-- tocstop -->

</div>
</div>

<hr>
<h2><span id="概要">概要</span></h2><p>2022.08.02 時点、<br>Lake Formation blueprint incremental database で生成された Glue Workflow を実行すると異常終了する事象がありました。</p>
<h2><span id="まず結論">まず結論</span></h2><p>最終的に修正されたスクリプトは以下に残しております。<br>対応内容はコミットログをご参照いただければと思います。</p>
<p><a href="https://github.com/kenzo0107/aws-glue-jobs-incremental-database-etl">https://github.com/kenzo0107/aws-glue-jobs-incremental-database-etl</a></p>
<p>主な対応内容は以下の通りです。</p>
<ol>
<li><a href="https://github.com/kenzo0107/aws-glue-jobs-incremental-database-etl/commit/24e310258bc824cac981ea0bd65a18280aa39ca7">fix: TypeError: object of type ‘filter’ has no len()</a></li>
<li><a href="https://github.com/kenzo0107/aws-glue-jobs-incremental-database-etl/commit/d023121709673fac768dbd2df85840e966a19955">fix: TypeError: Strings must be encoded before hashing</a></li>
<li><a href="https://github.com/kenzo0107/aws-glue-jobs-incremental-database-etl/commit/00112287a0deb5f85aeb3ba1c839271eb69fd4a3">fix: テーブルの suffix が重複する場合にテーブルが not found になる</a></li>
</ol>
<h2><span id="まとめ">まとめ</span></h2><p>生成されたスクリプトについては AWS SA さんに共有しており<br>ゆくゆくご対応いただけるのではないかと思います。</p>
<p>以上<br>参考になれば幸いです。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2022-07-29T15:00:00.000Z" title="2022-07-29T15:00:00.000Z">2022-07-30</time><span class="level-item"><a class="link-muted" href="/categories/RaspberryPI/">RaspberryPI</a></span><span class="level-item">1分 read (About 163 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/07/29/2022-07-30-fix-the-system-should-be-configured-for-the-legacy-camera-stack/">fix the system should be configured for the legacy camera stack</a></h1><div class="content"><div class="toc">
<div class="toc-content">
<h3 class="menu-label"><span id="toc">ToC</span></h3>

<!-- toc -->

<ul>
<li><a href="#%E6%A6%82%E8%A6%81">概要</a></li>
<li><a href="#libcamera-%E3%82%92%E5%88%A9%E7%94%A8%E3%81%97%E3%82%88%E3%81%86">libcamera を利用しよう</a></li>
<li><a href="#legacy-camera-stack-%E3%82%92%E3%82%B5%E3%83%9D%E3%83%BC%E3%83%88%E3%81%97%E3%81%A6%E3%82%82%E8%89%AF%E3%81%97">legacy camera stack をサポートしても良し</a></li>
</ul>
<!-- tocstop -->

</div>
</div>

<hr>
<h2><span id="概要">概要</span></h2><p>Raspberry PI bullseye で <code>raspistill -o test.jpg</code> 実行時に掲題のエラーが発生しました。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ raspistill -o test.jpg</span><br><span class="line"></span><br><span class="line">the system should be configured for the legacy camera stack</span><br></pre></td></tr></table></figure>

<p>以下公式にしっかりと bullseye 以降は libcamera ベースのスタックのみが含まれている、と記載されていました。</p>
<p><a href="https://www.raspberrypi.com/documentation/accessories/camera.html">https://www.raspberrypi.com/documentation/accessories/camera.html</a></p>
<blockquote>
<p>Raspberry Pi OS images from Bullseye onwards will contain only the libcamera-based stack.</p>
</blockquote>
<h2><span id="libcamera-を利用しよう">libcamera を利用しよう</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ libcamera-still -o test.jpg</span><br></pre></td></tr></table></figure>

<h2><span id="legacy-camera-stack-をサポートしても良し">legacy camera stack をサポートしても良し</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo raspi-config</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Interface Options を選択</span><br><span class="line">&#x2F;&#x2F; Legacy Camera Enable&#x2F;disable legacy camera support</span><br></pre></td></tr></table></figure>

<p>以上<br>参考になれば幸いです。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2022-07-15T15:00:00.000Z" title="2022-07-15T15:00:00.000Z">2022-07-16</time><span class="level-item"><a class="link-muted" href="/categories/RaspberryPI/">RaspberryPI</a></span><span class="level-item">数秒 read (About 95 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/07/15/2022-07-16-raspberrypi-bullseye-motion/">Raspberry PI bullseye で motion を起動しブラウザで表示する</a></h1><div class="content"><div class="toc">
<div class="toc-content">
<h3 class="menu-label"><span id="toc">ToC</span></h3>

<!-- toc -->

<ul>
<li><a href="#%E6%A6%82%E8%A6%81">概要</a></li>
<li><a href="#rpi-%E3%81%AE%E8%A8%AD%E5%AE%9A">RPi の設定</a></li>
<li><a href="#rpi-%E5%A4%96%E3%81%AE%E3%83%9E%E3%82%B7%E3%83%B3%E3%81%AE%E4%BD%9C%E6%A5%AD">RPi 外のマシンの作業</a></li>
</ul>
<!-- tocstop -->

</div>
</div>

<hr>
<h2><span id="概要">概要</span></h2><p>Raspberry PI bullseye で motion 起動しブラウザで表示します。</p>
<h2><span id="rpi-の設定">RPi の設定</span></h2><p>数行で完了します。</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> wget https://github.com/Motion-Project/motion/releases/download/release-4.4.0/bullseye_motion_4.4.0-1_armhf.deb</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt install -y ./bullseye_motion_4.4.0-1_armhf.deb</span></span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo vim /etc/motion/motion.conf</span></span><br><span class="line">- stream_localhost on</span><br><span class="line">+ stream_localhost off</span><br></pre></td></tr></table></figure>

<h2><span id="rpi-外のマシンの作業">RPi 外のマシンの作業</span></h2><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> open &lt;raspi ip&gt;:8081</span></span><br></pre></td></tr></table></figure>

<p>以上<br>参考になれば幸いです。</p>
</div></article></div><nav class="pagination is-centered mt-4" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/page/0/">前</a></div><div class="pagination-next"><a href="/page/2/">次</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/32/">32</a></li></ul></nav></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="kenzo0107"></figure><p class="title is-size-4 is-block line-height-inherit">kenzo0107</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">投稿</p><a href="/archives"><p class="title">320</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">カテゴリ</p><a href="/categories"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">タグ</p><a href="/tags"><p class="title">88</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/kenzo0107" target="_blank" rel="noopener">フォローする</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/kenzo0107"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/kenzo0107"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">カテゴリ</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/AWS/"><span class="level-start"><span class="level-item">AWS</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/DIY/"><span class="level-start"><span class="level-item">DIY</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Go/"><span class="level-start"><span class="level-item">Go</span></span><span class="level-end"><span class="level-item tag">26</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/RaspberryPI/"><span class="level-start"><span class="level-item">RaspberryPI</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Terraform/"><span class="level-start"><span class="level-item">Terraform</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最近の記事</h3><article class="media"><a class="media-left" href="/2022/10/30/2022-10-31-js-get-a-last-month/"><p class="image is-64x64"><img class="thumbnail" src="https://i.imgur.com/VbLapz4.png" alt="JavaScript で日付計算の妙"></p></a><div class="media-content size-small"><p><time dateTime="2022-10-30T15:00:00.000Z">2022-10-31</time></p><p class="title is-6"><a class="link-muted" href="/2022/10/30/2022-10-31-js-get-a-last-month/">JavaScript で日付計算の妙</a></p><p class="is-uppercase"></p></div></article><article class="media"><a class="media-left" href="/2022/10/25/2022-10-26-terraform-sort-map/"><p class="image is-64x64"><img class="thumbnail" src="https://i.imgur.com/8cuKRz1.png" alt="terraform で map 型の値を key 順にソートした上で value のリストを取得する"></p></a><div class="media-content size-small"><p><time dateTime="2022-10-25T15:00:00.000Z">2022-10-26</time></p><p class="title is-6"><a class="link-muted" href="/2022/10/25/2022-10-26-terraform-sort-map/">terraform で map 型の値を key 順にソートした上で value のリストを取得する</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Terraform/">Terraform</a></p></div></article><article class="media"><a class="media-left" href="/2022/09/28/2022-09-29-upgrade_elasticache_redis/"><p class="image is-64x64"><img class="thumbnail" src="https://i.imgur.com/6PU8EYE.png" alt="AWS ElastiCache Redis バージョンアップ&amp;ノードタイプ変更時の注意点"></p></a><div class="media-content size-small"><p><time dateTime="2022-09-28T15:00:00.000Z">2022-09-29</time></p><p class="title is-6"><a class="link-muted" href="/2022/09/28/2022-09-29-upgrade_elasticache_redis/">AWS ElastiCache Redis バージョンアップ&amp;ノードタイプ変更時の注意点</a></p><p class="is-uppercase"></p></div></article><article class="media"><a class="media-left" href="/2022/09/12/2022-09-13-setup-tfsec/"><p class="image is-64x64"><img class="thumbnail" src="https://aquasecurity.github.io/tfsec/v0.63.1/imgs/homelogo.png" alt="tfsec で terraform 管理リソースのセキュリティ強化"></p></a><div class="media-content size-small"><p><time dateTime="2022-09-12T15:00:00.000Z">2022-09-13</time></p><p class="title is-6"><a class="link-muted" href="/2022/09/12/2022-09-13-setup-tfsec/">tfsec で terraform 管理リソースのセキュリティ強化</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2022-08-23T15:00:00.000Z">2022-08-24</time></p><p class="title is-6"><a class="link-muted" href="/2022/08/23/2022-08-24-setup-nodejs-on-alpine/">マルチステージビルドで alpine イメージに nodejs をセットアップする</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">タグ</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/htaccess/"><span class="tag">.htaccess</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ALB/"><span class="tag">ALB</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AWS/"><span class="tag">AWS</span><span class="tag is-grey-lightest">43</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ansible/"><span class="tag">Ansible</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AntiVirus/"><span class="tag">AntiVirus</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apache/"><span class="tag">Apache</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Chef/"><span class="tag">Chef</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CodeBuild/"><span class="tag">CodeBuild</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Cookie/"><span class="tag">Cookie</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Corosync/"><span class="tag">Corosync</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Datadog/"><span class="tag">Datadog</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ECR/"><span class="tag">ECR</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ECS/"><span class="tag">ECS</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ElastiCache/"><span class="tag">ElastiCache</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Elasticsearch/"><span class="tag">Elasticsearch</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Email/"><span class="tag">Email</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FTPS/"><span class="tag">FTPS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Fluentd/"><span class="tag">Fluentd</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GKE/"><span class="tag">GKE</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GitHub-Actions/"><span class="tag">GitHub Actions</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Go/"><span class="tag">Go</span><span class="tag is-grey-lightest">24</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GooglePlay/"><span class="tag">GooglePlay</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hubot/"><span class="tag">Hubot</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Jenkins/"><span class="tag">Jenkins</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kibana/"><span class="tag">Kibana</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LINE-Notify/"><span class="tag">LINE Notify</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Lambda/"><span class="tag">Lambda</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Let-s-encrypt/"><span class="tag">Let&#039;s encrypt</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MachineLearning/"><span class="tag">MachineLearning</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Monitoring/"><span class="tag">Monitoring</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MySQL/"><span class="tag">MySQL</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Nginx/"><span class="tag">Nginx</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenSSL/"><span class="tag">OpenSSL</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Outlook/"><span class="tag">Outlook</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PHP/"><span class="tag">PHP</span><span class="tag is-grey-lightest">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pacemaker/"><span class="tag">Pacemaker</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Prometheus/"><span class="tag">Prometheus</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ProxySQL/"><span class="tag">ProxySQL</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Puppeteer/"><span class="tag">Puppeteer</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Rails/"><span class="tag">Rails</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RaspberryPI/"><span class="tag">RaspberryPI</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Reactio/"><span class="tag">Reactio</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Redis/"><span class="tag">Redis</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ruby/"><span class="tag">Ruby</span><span class="tag is-grey-lightest">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/S3/"><span class="tag">S3</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SSL/"><span class="tag">SSL</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Security/"><span class="tag">Security</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SendGrid/"><span class="tag">SendGrid</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Slack/"><span class="tag">Slack</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SonarQube/"><span class="tag">SonarQube</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/StatsBot/"><span class="tag">StatsBot</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Swift/"><span class="tag">Swift</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Terraform/"><span class="tag">Terraform</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Twilio/"><span class="tag">Twilio</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Unity/"><span class="tag">Unity</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vagrant/"><span class="tag">Vagrant</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vault/"><span class="tag">Vault</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WAF/"><span class="tag">WAF</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Zabbix/"><span class="tag">Zabbix</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/awk/"><span class="tag">awk</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/casperjs/"><span class="tag">casperjs</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cpu/"><span class="tag">cpu</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csv/"><span class="tag">csv</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flask/"><span class="tag">flask</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/i-node/"><span class="tag">i-node</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iftop/"><span class="tag">iftop</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ipinfo/"><span class="tag">ipinfo</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iptable/"><span class="tag">iptable</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kibana/"><span class="tag">kibana</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macos/"><span class="tag">macos</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/no-ip/"><span class="tag">no-ip</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ping/"><span class="tag">ping</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pip/"><span class="tag">pip</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/reCAPTCHA/"><span class="tag">reCAPTCHA</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sftp/"><span class="tag">sftp</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spam/"><span class="tag">spam</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssh/"><span class="tag">ssh</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vim/"><span class="tag">vim</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wget/"><span class="tag">wget</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/yum/"><span class="tag">yum</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/zsh/"><span class="tag">zsh</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Advertisement</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6265337967545472" data-ad-slot="9975280607" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="長生村本郷Engineers&#039;Blog" height="28"></a><p class="size-small"><span>&copy; 2022 Kenzo Tanaka</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("ja");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://kenzo0107.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: ''
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Zurück nach oben" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"投稿","pages":"Pages","categories":"カテゴリ","tags":"タグ"});
        });</script></body></html>