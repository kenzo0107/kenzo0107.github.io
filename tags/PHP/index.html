<!doctype html>
<html lang="ja"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>タグ: PHP - 長生村本郷Engineers&#039;Blog</title><meta description="tech"><meta property="og:type" content="blog"><meta property="og:title" content="長生村本郷Engineers&#039;Blog"><meta property="og:url" content="https://kenzo0107.github.io/"><meta property="og:site_name" content="長生村本郷Engineers&#039;Blog"><meta property="og:description" content="tech"><meta property="og:locale" content="ja_JP"><meta property="og:image" content="https://kenzo0107.github.io/img/og_image.png"><meta property="article:author" content="Kenzo Tanaka"><meta property="article:tag" content="aws golang"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://kenzo0107.github.io"},"headline":"長生村本郷Engineers'Blog","image":["https://kenzo0107.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Kenzo Tanaka"},"description":"tech"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-162026478-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-162026478-1');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><script data-ad-client="ca-pub-6265337967545472" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="長生村本郷Engineers&#039;Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/2013/12/31/PrivacyPolicy/">PrivacyPolicy</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/kenzo0107"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">タグ</a></li><li class="is-active"><a href="#" aria-current="page">PHP</a></li></ul></nav></div></div><div class="card"><div class="card-image"><a class="image" href="/2017/06/12/2017-06-13-update-apache-php/"><img class="thumbnail" src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20170613/20170613223736.jpg" alt="Apache 2.2.15 → 2.4.25   PHP 5.6 → 7 へアップデート on CentOS 6.9"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-06-12T15:00:00.000Z" title="2017-06-12T15:00:00.000Z">2017-06-13</time><span class="level-item">8分 read (About 1187 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/06/12/2017-06-13-update-apache-php/">Apache 2.2.15 → 2.4.25   PHP 5.6 → 7 へアップデート on CentOS 6.9</a></h1><div class="content"><h2><span id="概要">概要</span></h2><p>PHP5 利用していますか？</p>
<p>PHP5.6 のセキュリティサポート期限は <code>31 Dec 2018</code> 迄<br>※ <a href="http://php.net/supported-versions.php">Supported Versions</a> 参考</p>
<p>Apache/PHP アップデート、腰が重かったのですが<br>個人契約サーバなら誰にも迷惑かけないしいいか♪</p>
<p>ということで<br>放置気味にされた Apache2.2.15/PHP5.6 の個人のサーバを<br>アップデートすべく実施した内容をまとめました。</p>
<h2><span id="三行まとめ">三行まとめ</span></h2><ul>
<li>SoftwareCollection を利用し現存Apache/PHPを残したまま、アップデート版を共存させ切り替え。のち古い Apache/PHP 削除</li>
<li>必要モジュール (MySQLi, PHPRedis)インストール</li>
<li>PHP 7 で廃止された PHP5.6 機能やシンタックスを修正</li>
</ul>
<h2><span id="softwarecollection-とは">SoftwareCollection とは？</span></h2><div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20170613/20170613224451.png" width="100%">
</div>


<p><a href="https://www.softwarecollections.org/en/">公式サイト</a> によると<br>以下の様に説明されています。</p>
<ul>
<li><p>英語</p>
<blockquote>
<p>Software Collections give you the power to build, install, and use multiple versions of software on the same system, without affecting system-wide installed packages.</p>
</blockquote>
</li>
<li><p>日本語</p>
<blockquote>
<p>ソフトウェアコレクションは、システム全体でインストールされたパッケージに影響を与えることなく、同じシステム上に複数のバージョンのソフトウェアを構築、インストール、使用する能力を提供します。</p>
</blockquote>
</li>
</ul>
<p>同じシステム上に複数バージョンのソフトウェアをインストールできる様になる、<br>ということです。</p>
<h2><span id="softwarecollection-インストール">SoftwareCollection インストール</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum install centos-release-scl</span><br></pre></td></tr></table></figure>

<h2><span id="httpd24-関連のモジュールインストール">httpd24 関連のモジュールインストール</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum-config-manager --enable rhel-server-rhscl-6-rpms</span><br><span class="line">$ sudo yum install httpd24-httpd httpd24-httpd-devel httpd24-mod_proxy_html httpd24-mod_session httpd24-mod_ssl</span><br><span class="line">$ sudo scl enable httpd24 bash</span><br><span class="line">$ sudo service httpd graceful</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ httpd -v</span><br><span class="line">Server version: Apache&#x2F;2.4.25 (Red Hat)</span><br><span class="line">Server built:   Apr 12 2017 06:35:50</span><br></pre></td></tr></table></figure>

<h2><span id="rhscl-リポジトリ利用可設定">RHSCL リポジトリ利用可設定</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo yum-config-manager --enable rhel-server-rhscl-7-rpms</span><br></pre></td></tr></table></figure>

<h2><span id="php7-関連モジュールをインストール">php7 関連モジュールをインストール</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># yum install -y scl-utils</span><br><span class="line"># yum install -y https:&#x2F;&#x2F;dl.fedoraproject.org&#x2F;pub&#x2F;epel&#x2F;epel-release-latest-7.noarch.rpm</span><br><span class="line"># yum install -y http:&#x2F;&#x2F;rpms.remirepo.net&#x2F;enterprise&#x2F;remi-release-7.rpm</span><br><span class="line"># yum install -y php70</span><br><span class="line"># yum install -y php70-php-mysqlnd</span><br><span class="line"># yum install -y php70-php-curl</span><br><span class="line"># yum install -y php70-php-simplexml</span><br><span class="line"># yum install -y php70-php-devel php70-php-gd php70-php-json php70-php-mcrypt php70-php-mbstring php70-php-opcache php70-php-pear php70-php-pecl-apcu php70-php-pecl-geoip php70-php-pecl-imagick php70-php-pecl-json-post php70-php-pecl-memcache php70-php-pecl-xmldiff php70-php-pecl-zip php70-php-pspell php70-php-soap php70-php-tidy php70-php-xml php70-php-xmlrpc</span><br></pre></td></tr></table></figure>

<h2><span id="mysqli-インストール">mysqli インストール</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum --enablerepo&#x3D;remi-php70 install php-mysqli</span><br></pre></td></tr></table></figure>

<h2><span id="php7-用-phpredis-インストール">PHP7 用 phpredis インストール</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># cd &#x2F;usr&#x2F;local&#x2F;src</span><br><span class="line"># git clone https:&#x2F;&#x2F;github.com&#x2F;phpredis&#x2F;phpredis.git</span><br><span class="line"># cd phpredis</span><br><span class="line"># git checkout php7</span><br><span class="line"># phpize</span><br><span class="line"># .&#x2F;configure</span><br><span class="line"># make</span><br><span class="line"># make install</span><br><span class="line"># echo &#39;extension&#x3D;redis.so&#39; &gt; &#x2F;etc&#x2F;opt&#x2F;rh&#x2F;rh-php70&#x2F;php.d&#x2F;redis.ini</span><br></pre></td></tr></table></figure>

<h2><span id="php-fpm-再起動">php-fpm 再起動</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># &#x2F;etc&#x2F;init.d&#x2F;php70-php-fpm restart</span><br></pre></td></tr></table></figure>

<h2><span id="httpd-再起動">httpd 再起動</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># &#x2F;etc&#x2F;init.d&#x2F;httpd24-httpd restart</span><br></pre></td></tr></table></figure>

<p>ここまでで PHP7 で動作する環境が整っているかと思います。<br>エラーログを見ながら修正に当たってください。</p>
<h2><span id="php-7-で廃止された構文を修正">PHP 7 で廃止された構文を修正</span></h2><h3><span id="php-parse-error-syntax-error-unexpected-new-t_new">PHP Parse error:  syntax error, unexpected ‘new’ (T_NEW)</span></h3><ul>
<li><code>&amp;= new &lt;クラス名&gt;</code> の指定が不可となり、 <code>= new &lt;クラス名&gt;</code> にする必要があります。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&amp;&#x3D; new Class</span><br><span class="line">↓</span><br><span class="line">&#x3D; new Class</span><br></pre></td></tr></table></figure>

<h3><span id="php-fatal-error-cannot-use-string-as-class-name-as-it-is-reserved">PHP Fatal error:  Cannot use ‘String’ as class name as it is reserved</span></h3><ul>
<li>PHP7 では class String, Int と型名の Class を作成できなくなりました。</li>
</ul>
<p>自分は以下の様に修正しました。<br>※ 適宜プロジェクトのコーディングルールに則ってご変更ください。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class String &#123;</span><br><span class="line">↓</span><br><span class="line">class Stringer &#123;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class Int &#123;</span><br><span class="line">↓</span><br><span class="line">class Intger &#123;</span><br></pre></td></tr></table></figure>

<p>プロジェクトによってはもっと色々出てくると思いますので<br>適宜修正ください。</p>
<h2><span id="総評">総評</span></h2><p>放置されがちになるミドルウェアのアップデートは小まめにやっておきたいですね。<br>脆弱性の定期的な棚卸しせねば</p>
<p>業務でアップデートするのであれば<br>アップデートする環境を別途用意してアップデートする、<br>そこでミドルウェア、アプリケーションのコードレベルでのアップデート手順をまとめ<br>本番環境で実施。</p>
<p>機能(url)毎に正しく動いたものだけプロキシで PHP7 へ流す<br>というのもアリかなと思います。</p>
<p>以上です。</p>
<h2><span id="参考">参考</span></h2><ul>
<li><a href="http://php.net/manual/ja/migration70.php">PHP 5.6.x から PHP 7.0.x への移行</a></li>
<li><a href="https://itpropartners.com/blog/9235/">PHP5.6からPHP７にアップデートする上で気をつけるコト</a></li>
</ul>
</div></article></div><div class="card"><div class="card-image"><a class="image" href="/2017/06/12/2017-06-04-install-php7-pecl-pear-on-macos/"><img class="thumbnail" src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20170604/20170604224801.png" alt="Install PHP7, PECL, PEAR on MacOS"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-06-12T15:00:00.000Z" title="2017-06-12T15:00:00.000Z">2017-06-13</time><span class="level-item">6分 read (About 970 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2017/06/12/2017-06-04-install-php7-pecl-pear-on-macos/">Install PHP7, PECL, PEAR on MacOS</a></h1><div class="content"><p>備忘録です。<br>忘れない為の自分への一筆。</p>
<h2><span id="php-7-インストール">PHP 7 インストール</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ brew update</span><br><span class="line">$ brew install homebrew&#x2F;php&#x2F;php70</span><br><span class="line">$ echo &#39;export PATH&#x3D;&quot;$(brew --prefix homebrew&#x2F;php&#x2F;php70)&#x2F;bin:$PATH&quot;&#39; &gt;&gt; ~&#x2F;.bashrc</span><br><span class="line">$ source ~&#x2F;.bashrc</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ php -v</span><br><span class="line"></span><br><span class="line">PHP 7.0.19 (cli) (built: May 21 2017 11:56:11) ( NTS )</span><br><span class="line">Copyright (c) 1997-2017 The PHP Group</span><br><span class="line">Zend Engine v3.0.0, Copyright (c) 1998-2017 Zend Technologies</span><br></pre></td></tr></table></figure>

<h2><span id="php-7-で-pecl-pear-インストール">PHP 7 で Pecl, Pear インストール</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -O http:&#x2F;&#x2F;pear.php.net&#x2F;go-pear.phar</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">$ sudo php -d detect_unicode&#x3D;0 go-pear.phar</span><br><span class="line"></span><br><span class="line">Below is a suggested file layout for your new PEAR installation.  To</span><br><span class="line">change individual locations, type the number in front of the</span><br><span class="line">directory.  Type &#39;all&#39; to change all of them or simply press Enter to</span><br><span class="line">accept these locations.</span><br><span class="line"></span><br><span class="line"> 1. Installation base ($prefix)                   : &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;php70&#x2F;7.0.19_11</span><br><span class="line"> 2. Temporary directory for processing            : &#x2F;tmp&#x2F;pear&#x2F;install</span><br><span class="line"> 3. Temporary directory for downloads             : &#x2F;tmp&#x2F;pear&#x2F;install</span><br><span class="line"> 4. Binaries directory                            : &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;php70&#x2F;7.0.19_11&#x2F;bin</span><br><span class="line"> 5. PHP code directory ($php_dir)                 : &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;php70&#x2F;7.0.19_11&#x2F;share&#x2F;pear</span><br><span class="line"> 6. Documentation directory                       : &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;php70&#x2F;7.0.19_11&#x2F;docs</span><br><span class="line"> 7. Data directory                                : &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;php70&#x2F;7.0.19_11&#x2F;data</span><br><span class="line"> 8. User-modifiable configuration files directory : &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;php70&#x2F;7.0.19_11&#x2F;cfg</span><br><span class="line"> 9. Public Web Files directory                    : &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;php70&#x2F;7.0.19_11&#x2F;www</span><br><span class="line">10. System manual pages directory                 : &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;php70&#x2F;7.0.19_11&#x2F;man</span><br><span class="line">11. Tests directory                               : &#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;php70&#x2F;7.0.19_11&#x2F;tests</span><br><span class="line">12. Name of configuration file                    : &#x2F;usr&#x2F;local&#x2F;etc&#x2F;php&#x2F;7.0&#x2F;pear.conf</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; インストール先指定</span><br><span class="line">1-12, &#39;all&#39; or Enter to continue: (「1」と入力しEnter)</span><br><span class="line"></span><br><span class="line">(Use $prefix as a shortcut for &#39;&#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;php70&#x2F;7.0.19_11&#39;, etc.)</span><br><span class="line">Installation base ($prefix) [&#x2F;usr&#x2F;local&#x2F;Cellar&#x2F;php70&#x2F;7.0.19_11] : (「&#x2F;usr&#x2F;local&#x2F;pear」と入力しEnter)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Below is a suggested file layout for your new PEAR installation.  To</span><br><span class="line">change individual locations, type the number in front of the</span><br><span class="line">directory.  Type &#39;all&#39; to change all of them or simply press Enter to</span><br><span class="line">accept these locations.</span><br><span class="line"></span><br><span class="line"> 1. Installation base ($prefix)                   : &#x2F;usr&#x2F;local&#x2F;pear</span><br><span class="line"> 2. Temporary directory for processing            : &#x2F;tmp&#x2F;pear&#x2F;install</span><br><span class="line"> 3. Temporary directory for downloads             : &#x2F;tmp&#x2F;pear&#x2F;install</span><br><span class="line"> 4. Binaries directory                            : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;bin</span><br><span class="line"> 5. PHP code directory ($php_dir)                 : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;share&#x2F;pear</span><br><span class="line"> 6. Documentation directory                       : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;docs</span><br><span class="line"> 7. Data directory                                : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;data</span><br><span class="line"> 8. User-modifiable configuration files directory : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;cfg</span><br><span class="line"> 9. Public Web Files directory                    : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;www</span><br><span class="line">10. System manual pages directory                 : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;man</span><br><span class="line">11. Tests directory                               : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;tests</span><br><span class="line">12. Name of configuration file                    : &#x2F;usr&#x2F;local&#x2F;etc&#x2F;php&#x2F;7.0&#x2F;pear.conf</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; バイナリディレクトリ指定</span><br><span class="line">1-12, &#39;all&#39; or Enter to continue: (「4」と入力しEnter)</span><br><span class="line"></span><br><span class="line">(Use $prefix as a shortcut for &#39;&#x2F;usr&#x2F;local&#x2F;pear&#39;, etc.)</span><br><span class="line">Binaries directory [$prefix&#x2F;bin] : &#x2F;usr&#x2F;local&#x2F;bin</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Below is a suggested file layout for your new PEAR installation.  To</span><br><span class="line">change individual locations, type the number in front of the</span><br><span class="line">directory.  Type &#39;all&#39; to change all of them or simply press Enter to</span><br><span class="line">accept these locations.</span><br><span class="line"></span><br><span class="line"> 1. Installation base ($prefix)                   : &#x2F;usr&#x2F;local&#x2F;pear</span><br><span class="line"> 2. Temporary directory for processing            : &#x2F;tmp&#x2F;pear&#x2F;install</span><br><span class="line"> 3. Temporary directory for downloads             : &#x2F;tmp&#x2F;pear&#x2F;install</span><br><span class="line"> 4. Binaries directory                            : &#x2F;usr&#x2F;local&#x2F;bin</span><br><span class="line"> 5. PHP code directory ($php_dir)                 : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;share&#x2F;pear</span><br><span class="line"> 6. Documentation directory                       : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;docs</span><br><span class="line"> 7. Data directory                                : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;data</span><br><span class="line"> 8. User-modifiable configuration files directory : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;cfg</span><br><span class="line"> 9. Public Web Files directory                    : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;www</span><br><span class="line">10. System manual pages directory                 : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;man</span><br><span class="line">11. Tests directory                               : &#x2F;usr&#x2F;local&#x2F;pear&#x2F;tests</span><br><span class="line">12. Name of configuration file                    : &#x2F;usr&#x2F;local&#x2F;etc&#x2F;php&#x2F;7.0&#x2F;pear.conf</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 以上で基本設定が済んだのでインストールを開始する</span><br><span class="line">1-12, &#39;all&#39; or Enter to continue: (何も入力せずEnter)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; インストールが開始されます。</span><br><span class="line">Beginning install...</span><br><span class="line">Configuration written to &#x2F;usr&#x2F;local&#x2F;etc&#x2F;php&#x2F;7.0&#x2F;pear.conf...</span><br><span class="line">Initialized registry...</span><br><span class="line">Preparing to install...</span><br><span class="line">installing phar:&#x2F;&#x2F;&#x2F;Users&#x2F;kenzo.tanaka&#x2F;azure&#x2F;go-pear.phar&#x2F;PEAR&#x2F;go-pear-tarballs&#x2F;Archive_Tar-1.4.2.tar...</span><br><span class="line">installing phar:&#x2F;&#x2F;&#x2F;Users&#x2F;kenzo.tanaka&#x2F;azure&#x2F;go-pear.phar&#x2F;PEAR&#x2F;go-pear-tarballs&#x2F;Console_Getopt-1.4.1.tar...</span><br><span class="line">installing phar:&#x2F;&#x2F;&#x2F;Users&#x2F;kenzo.tanaka&#x2F;azure&#x2F;go-pear.phar&#x2F;PEAR&#x2F;go-pear-tarballs&#x2F;PEAR-1.10.4.tar...</span><br><span class="line">installing phar:&#x2F;&#x2F;&#x2F;Users&#x2F;kenzo.tanaka&#x2F;azure&#x2F;go-pear.phar&#x2F;PEAR&#x2F;go-pear-tarballs&#x2F;Structures_Graph-1.1.1.tar...</span><br><span class="line">installing phar:&#x2F;&#x2F;&#x2F;Users&#x2F;kenzo.tanaka&#x2F;azure&#x2F;go-pear.phar&#x2F;PEAR&#x2F;go-pear-tarballs&#x2F;XML_Util-1.4.2.tar...</span><br><span class="line">install ok: channel:&#x2F;&#x2F;pear.php.net&#x2F;Archive_Tar-1.4.2</span><br><span class="line">install ok: channel:&#x2F;&#x2F;pear.php.net&#x2F;Console_Getopt-1.4.1</span><br><span class="line">install ok: channel:&#x2F;&#x2F;pear.php.net&#x2F;Structures_Graph-1.1.1</span><br><span class="line">install ok: channel:&#x2F;&#x2F;pear.php.net&#x2F;XML_Util-1.4.2</span><br><span class="line">install ok: channel:&#x2F;&#x2F;pear.php.net&#x2F;PEAR-1.10.4</span><br><span class="line">PEAR: Optional feature webinstaller available (PEAR&#39;s web-based installer)</span><br><span class="line">PEAR: Optional feature gtkinstaller available (PEAR&#39;s PHP-GTK-based installer)</span><br><span class="line">PEAR: Optional feature gtk2installer available (PEAR&#39;s PHP-GTK2-based installer)</span><br><span class="line">PEAR: To install optional features use &quot;pear install pear&#x2F;PEAR#featurename&quot;</span><br><span class="line"></span><br><span class="line">The &#39;pear&#39; command is now at your service at &#x2F;usr&#x2F;local&#x2F;bin&#x2F;pear</span><br><span class="line"></span><br><span class="line">** The &#39;pear&#39; command is not currently in your PATH, so you need to</span><br><span class="line">** use &#39;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;pear&#39; until you have added</span><br><span class="line">** &#39;&#x2F;usr&#x2F;local&#x2F;bin&#39; to your PATH environment variable.</span><br><span class="line"></span><br><span class="line">Run it without parameters to see the available actions, try &#39;pear list&#39;</span><br><span class="line">to see what packages are installed, or &#39;pear help&#39; for help.</span><br><span class="line"></span><br><span class="line">For more information about PEAR, see:</span><br><span class="line"></span><br><span class="line">  http:&#x2F;&#x2F;pear.php.net&#x2F;faq.php</span><br><span class="line">  http:&#x2F;&#x2F;pear.php.net&#x2F;manual&#x2F;</span><br><span class="line"></span><br><span class="line">Thanks for using go-pear!</span><br></pre></td></tr></table></figure>


<h2><span id="pecl-インストール確認">PECL インストール確認</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ which pecl</span><br><span class="line">&#x2F;usr&#x2F;local&#x2F;bin&#x2F;pecl</span><br><span class="line"></span><br><span class="line">$ pecl version</span><br><span class="line">PEAR Version: 1.10.4</span><br><span class="line">PHP Version: 7.0.19</span><br><span class="line">Zend Engine Version: 3.0.0</span><br><span class="line">Running on: Darwin pc-12-332.local 16.5.0 Darwin Kernel Version 16.5.0: Fri Mar  3 16:52:33 PST 2017; root:xnu-3789.51.2~3&#x2F;RELEASE_X86_64 x86_64</span><br></pre></td></tr></table></figure>

<h2><span id="pear-インストール確認">PEAR インストール確認</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ which pear</span><br><span class="line">&#x2F;usr&#x2F;local&#x2F;bin&#x2F;pear</span><br><span class="line"></span><br><span class="line">PEAR Version: 1.10.4</span><br><span class="line">PHP Version: 7.0.19</span><br><span class="line">Zend Engine Version: 3.0.0</span><br><span class="line">Running on: Darwin pc-12-332.local 16.5.0 Darwin Kernel Version 16.5.0: Fri Mar  3 16:52:33 PST 2017; root:xnu-3789.51.2~3&#x2F;RELEASE_X86_64 x86_64</span><br></pre></td></tr></table></figure>

<p>以上です。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2016-09-08T15:00:00.000Z" title="2016-09-08T15:00:00.000Z">2016-09-09</time><span class="level-item">7分 read (About 1058 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2016/09/08/2016-09-09-valid-email-by-php/">PHP 検証フィルタで Email アドレス検証 を検証する</a></h1><div class="content"><h2><span id="概要">概要</span></h2><p>Email アドレスのフォーマットチェックとして PHP には検証フィルタが用意されています。</p>
<p>こんな使い方しますね。</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (filter_var($email, FILTER_VALIDATE_EMAIL)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'(^-^) OK Email アドレスフォーマットとして妥当'</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'(&gt;_&lt;) NG'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以下 php.net ではこのように記述されている。</p>
<p><a href="http://php.net/manual/ja/filter.filters.validate.php">http://php.net/manual/ja/filter.filters.validate.php</a></p>
<blockquote>
<p>値が妥当な e-mail アドレスであるかどうかを検証します。<br>この検証は、e-mail アドレスが RFC 822 に沿った形式であるかどうかを確かめます。 ただし、コメントおよび空白の折り返し (whitespace folding) には対応していません。</p>
</blockquote>
<h2><span id="検証">検証</span></h2><script src="//gist.github.com/kenzo0107/49922bf85c73f5f85031ea4abf3aa7ce.js"></script>

<h3><span id="結果">結果</span></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">[OK (^-^) EMAIL LIST]</span><br><span class="line">abc@gmail.com</span><br><span class="line">a!bc@gmail.com</span><br><span class="line">a#bc@gmail.com</span><br><span class="line">a$bc@gmail.com</span><br><span class="line">a%bc@gmail.com</span><br><span class="line">a&amp;bc@gmail.com</span><br><span class="line">a&#96;bc@gmail.com</span><br><span class="line">a&#x3D;bc@gmail.com</span><br><span class="line">a~bc@gmail.com</span><br><span class="line">a~bc@gmail.com</span><br><span class="line">a|bc@gmail.com</span><br><span class="line">a^bc@gmail.com</span><br><span class="line">a*bc@gmail.com</span><br><span class="line">a+bc@gmail.com</span><br><span class="line">a?bc@gmail.com</span><br><span class="line">a&#96;bc@gmail.com</span><br><span class="line">a&#123;bc@gmail.com</span><br><span class="line">a&#125;bc@gmail.com</span><br><span class="line">a&#125;bc@gmail.com</span><br><span class="line">!abc@gmail.com</span><br><span class="line">#abc@gmail.com</span><br><span class="line">$abc@gmail.com</span><br><span class="line">%abc@gmail.com</span><br><span class="line">&amp;abc@gmail.com</span><br><span class="line">&#x3D;abc@gmail.com</span><br><span class="line">~abc@gmail.com</span><br><span class="line">|abc@gmail.com</span><br><span class="line">^abc@gmail.com</span><br><span class="line">*abc@gmail.com</span><br><span class="line">+abc@gmail.com</span><br><span class="line">?abc@gmail.com</span><br><span class="line">&#96;abc@gmail.com</span><br><span class="line">&#123;abc@gmail.com</span><br><span class="line">&#125;abc@gmail.com</span><br><span class="line">a__bc@gmail.com</span><br><span class="line">abc_@gmail.com</span><br><span class="line">abc@vwx.yz</span><br><span class="line"></span><br><span class="line">[NG (&gt;_&lt;) EMAIL LIST]</span><br><span class="line">a&quot;bc@gmail.com</span><br><span class="line">a@bc@gmail.com</span><br><span class="line">a(bc@gmail.com</span><br><span class="line">a)bc@gmail.com</span><br><span class="line">a\bc@gmail.com</span><br><span class="line">a:bc@gmail.com</span><br><span class="line">a;bc@gmail.com</span><br><span class="line">a&lt;bc@gmail.com</span><br><span class="line">a&gt;bc@gmail.com</span><br><span class="line">a&gt;bc@gmail.com</span><br><span class="line">a,bc@gmail.com</span><br><span class="line">a[bc@gmail.com</span><br><span class="line">a]bc@gmail.com</span><br><span class="line">¥abc@gmail.com</span><br><span class="line">&quot;abc@gmail.com</span><br><span class="line">@abc@gmail.com</span><br><span class="line">(abc@gmail.com</span><br><span class="line">)abc@gmail.com</span><br><span class="line">\abc@gmail.com</span><br><span class="line">:abc@gmail.com</span><br><span class="line">;abc@gmail.com</span><br><span class="line">&lt;abc@gmail.com</span><br><span class="line">&gt;abc@gmail.com</span><br><span class="line">,abc@gmail.com</span><br><span class="line">[abc@gmail.com</span><br><span class="line">]abc@gmail.com</span><br><span class="line">a..bc@gmail.com</span><br><span class="line">abc.@gmail.com</span><br><span class="line">abc@@vwx.yz</span><br></pre></td></tr></table></figure>

<p>NGとしたいような Emailアドレス を通してしまいます。</p>
<p><code>&amp;abc@xyz.ab</code></p>
<h2><span id="これまでの評価">これまでの評価</span></h2><p>PHP 検証フィルタ FILTER_VALIDATE_EMAIL によるバリデーションは<br>社内システムで利用するアカウントでのEmailアドレス検証程度であれば利用可能か。</p>
<p>商用サービスとして検証フィルタのみでバリデーションするのは危険かなと思いました。</p>
<h2><span id="マイ-email-バリデーション">マイ Email バリデーション</span></h2><ul>
<li>検証フィルタ FILTER_VALIDATE_EMAIL はベーシックに利用</li>
<li>利用できる文字を 半角英数字 . _ - に制限</li>
<li>Qiita 記事を参照しDNS 検証チェック入れました。 (<a href="http://qiita.com/ShibuyaKosuke">ShibuyaKosuke</a> さんありがとうございます！)</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkEmailwithDNS</span><span class="params">($email, $check_dns = false)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> !filter_var($email, FILTER_VALIDATE_EMAIL):</span><br><span class="line">        <span class="keyword">case</span> !preg_match(<span class="string">"/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-Z0-9\._-]+)+$/"</span>, $email):</span><br><span class="line">        <span class="keyword">case</span> !preg_match(<span class="string">'/@([\w.-]++)\z/'</span>, $email, $m):</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">case</span> !$check_dns:</span><br><span class="line">        <span class="keyword">case</span> checkdnsrr($m[<span class="number">1</span>], <span class="string">'MX'</span>):</span><br><span class="line">        <span class="keyword">case</span> checkdnsrr($m[<span class="number">1</span>], <span class="string">'A'</span>):</span><br><span class="line">        <span class="keyword">case</span> checkdnsrr($m[<span class="number">1</span>], <span class="string">'AAAA'</span>):</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (checkEmailDNS($email, <span class="keyword">true</span>)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'(^-^) OK Email アドレスフォーマットとして妥当'</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">'(&gt;_&lt;) NG'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2><span id="マイ-email-バリデーション検証">マイ Email バリデーション検証</span></h2><script src="//gist.github.com/kenzo0107/a33a6e9a75ceb9cf1ccd7213c86db530.js"></script>

<h3><span id="結果">結果</span></h3><p>ほぼ弾いてくれます〜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">[OK (^-^) EMAIL LIST]</span><br><span class="line">abc@gmail.com</span><br><span class="line">a__bc@gmail.com</span><br><span class="line">abc_@gmail.com</span><br><span class="line"></span><br><span class="line">[NG (&gt;_&lt;) EMAIL LIST]</span><br><span class="line">a!bc@gmail.com</span><br><span class="line">a&quot;bc@gmail.com</span><br><span class="line">a@bc@gmail.com</span><br><span class="line">a#bc@gmail.com</span><br><span class="line">a$bc@gmail.com</span><br><span class="line">a%bc@gmail.com</span><br><span class="line">a&amp;bc@gmail.com</span><br><span class="line">a&#96;bc@gmail.com</span><br><span class="line">a(bc@gmail.com</span><br><span class="line">a)bc@gmail.com</span><br><span class="line">a&#x3D;bc@gmail.com</span><br><span class="line">a~bc@gmail.com</span><br><span class="line">a~bc@gmail.com</span><br><span class="line">a|bc@gmail.com</span><br><span class="line">a\bc@gmail.com</span><br><span class="line">a^bc@gmail.com</span><br><span class="line">a:bc@gmail.com</span><br><span class="line">a;bc@gmail.com</span><br><span class="line">a*bc@gmail.com</span><br><span class="line">a+bc@gmail.com</span><br><span class="line">a?bc@gmail.com</span><br><span class="line">a&lt;bc@gmail.com</span><br><span class="line">a&gt;bc@gmail.com</span><br><span class="line">a&gt;bc@gmail.com</span><br><span class="line">a,bc@gmail.com</span><br><span class="line">a&#96;bc@gmail.com</span><br><span class="line">a[bc@gmail.com</span><br><span class="line">a]bc@gmail.com</span><br><span class="line">a&#123;bc@gmail.com</span><br><span class="line">a&#125;bc@gmail.com</span><br><span class="line">a&#125;bc@gmail.com</span><br><span class="line">¥abc@gmail.com</span><br><span class="line">!abc@gmail.com</span><br><span class="line">&quot;abc@gmail.com</span><br><span class="line">@abc@gmail.com</span><br><span class="line">#abc@gmail.com</span><br><span class="line">$abc@gmail.com</span><br><span class="line">%abc@gmail.com</span><br><span class="line">&amp;abc@gmail.com</span><br><span class="line">(abc@gmail.com</span><br><span class="line">)abc@gmail.com</span><br><span class="line">&#x3D;abc@gmail.com</span><br><span class="line">~abc@gmail.com</span><br><span class="line">|abc@gmail.com</span><br><span class="line">\abc@gmail.com</span><br><span class="line">^abc@gmail.com</span><br><span class="line">:abc@gmail.com</span><br><span class="line">;abc@gmail.com</span><br><span class="line">*abc@gmail.com</span><br><span class="line">+abc@gmail.com</span><br><span class="line">?abc@gmail.com</span><br><span class="line">&lt;abc@gmail.com</span><br><span class="line">&gt;abc@gmail.com</span><br><span class="line">,abc@gmail.com</span><br><span class="line">&#96;abc@gmail.com</span><br><span class="line">[abc@gmail.com</span><br><span class="line">]abc@gmail.com</span><br><span class="line">&#123;abc@gmail.com</span><br><span class="line">&#125;abc@gmail.com</span><br><span class="line">a..bc@gmail.com</span><br><span class="line">abc.@gmail.com</span><br><span class="line">abc@@vwx.yz</span><br><span class="line">abc@vwx.yz</span><br></pre></td></tr></table></figure>


<h2><span id="参照">参照</span></h2><p><a href="http://qiita.com/ShibuyaKosuke/items/0b9a8fddaefb2060a14a">そろそろメールアドレスを正規表現だけでチェックするのは終わりにしませんか？</a></p>
<p>以上です。</p>
</div></article></div><div class="card"><div class="card-image"><a class="image" href="/2016/08/17/2016-08-18-oneliner-for-phper/"><img class="thumbnail" src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160818/20160818224146.jpg" alt="PHP エンジニアであれば必ずやるべき 1 ライナー"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2016-08-17T15:00:00.000Z" title="2016-08-17T15:00:00.000Z">2016-08-18</time><span class="level-item">3分 read (About 400 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2016/08/17/2016-08-18-oneliner-for-phper/">PHP エンジニアであれば必ずやるべき 1 ライナー</a></h1><div class="content"><p>みんなが幸せになれる<a href="http://blog.tojiru.net/">hiraku さん</a>の究極の1ライナーです。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ composer config -g repositories.packagist composer http://packagist.jp</span><br></pre></td></tr></table></figure>

<p>composer による インストールが劇的に早くなります。</p>
<p>遅い理由は 特に <span style="color:red">packagist.org が フランスにある</span> からとのこと</p>
<h2><span id="問題発生">問題発生</span></h2><p>早速上記 1 ライナーを実行!!</p>
<p>すると…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">You are running composer with xdebug enabled. This has a major impact on runtime performance. See https:&#x2F;&#x2F;getcomposer.org&#x2F;xdebug</span><br><span class="line">Do not run Composer as root&#x2F;super user! See https:&#x2F;&#x2F;getcomposer.org&#x2F;root for details</span><br></pre></td></tr></table></figure>

<p>xdeug が enabled になっているぞと怒られている。。</p>
<h2><span id="xdebug-設定箇所を探す">xdebug 設定箇所を探す</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ php -i | grep xdebug</span><br><span class="line"></span><br><span class="line">&#x2F;etc&#x2F;php.d&#x2F;xdebug.ini,</span><br><span class="line">xdebug</span><br><span class="line">xdebug support &#x3D;&gt; enabled</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>/etc/php.d/xdebug.ini で 設定していた。</p>
<p>※環境によっては php.ini で設定している等あるので注意</p>
<h2><span id="xdebug-を-disabled-に設定変更">xdebug を disabled に設定変更</span></h2><p>自分の PHP実行環境では xdebug を利用する必要性がなかった為、<br>/etc/php.d/xdebug.ini 退避</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv &#x2F;etc&#x2F;php.d&#x2F;xdebug.ini &#x2F;etc&#x2F;php.d&#x2F;xdebug.ini.org</span><br></pre></td></tr></table></figure>

<h2><span id="再度実行">再度実行</span></h2><p>あれ… また出てきた… 今度は、</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Do not run Composer as root&#x2F;super user! See https:&#x2F;&#x2F;getcomposer.org&#x2F;root for details</span><br></pre></td></tr></table></figure>

<p>root ユーザで実行するなと怒られている。。</p>
<h2><span id="root-ユーザ以外の通常ユーザへ変更">root ユーザ以外の通常ユーザへ変更</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># su - &lt;user&gt;</span><br></pre></td></tr></table></figure>

<h2><span id="再度実行">再度実行</span></h2><p>成功した！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ composer config -g repos.packagist composer https:&#x2F;&#x2F;packagist.jp</span><br><span class="line">$</span><br></pre></td></tr></table></figure>

<h2><span id="設定確認">設定確認</span></h2><p>packagist url が <code>https://packagist.jp</code> になっていることを確認</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ cat .composer&#x2F;config.json</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &quot;config&quot;: &#123;&#125;,</span><br><span class="line">    &quot;repositories&quot;: &#123;</span><br><span class="line">        &quot;packagist&quot;: &#123;</span><br><span class="line">            &quot;type&quot;: &quot;composer&quot;,</span><br><span class="line">            &quot;url&quot;: &quot;https:&#x2F;&#x2F;packagist.jp&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>良きPHPライフを！</p>
<h2><span id="参照">参照</span></h2><a href="https://tech.mercari.com/entry/2016/02/01/164829" class="link-preview" target="_blank"><div class="link-area"><div class="og-image"><img src="https://cloud.githubusercontent.com/assets/835251/12534815/55071302-c2ad-11e5-96a4-72e2c8744d5f.gif"></div><div class="descriptions"><div class="og-title">光遅い問題を克服してcomposerを10倍速くした話 - Mercari Engineering Blog</div><div class="og-description">はじめまして。サーバーサイドエンジニアの中野(@Hiraku)です。2015年12月からメルカリで働いています。 2016年1月27日(水)の第98回PHP勉強会@東京にて、composerを速くする取り組みについて発表をしてきました。 composerの遅さをまじめに考える #…</div></div></div></a>
</div></article></div><div class="card"><div class="card-image"><a class="image" href="/2016/08/09/2016-08-10-http-https-mixed/"><img class="thumbnail" src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160810/20160810114001.jpg" alt="http https 混在サイトでの Cookie Secure 属性の扱い方"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2016-08-09T15:00:00.000Z" title="2016-08-09T15:00:00.000Z">2016-08-10</time><span class="level-item">6分 read (About 891 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2016/08/09/2016-08-10-http-https-mixed/">http https 混在サイトでの Cookie Secure 属性の扱い方</a></h1><div class="content"><h2 id="問題提起"><a href="#問題提起" class="headerlink" title="問題提起"></a>問題提起</h2><p>https 通信環境下で Cookie に Secure 属性つけていますか？</p></div><a class="article-more button is-small size-small" href="/2016/08/09/2016-08-10-http-https-mixed/#more">Read More</a></article></div><div class="card"><div class="card-image"><a class="image" href="/2016/05/20/2016-05-21-jenkins-sonarqube-php-code-metrics/"><img class="thumbnail" src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521003213.png" alt="Jenkins + SonarQube で PHPコードメトリクス計測！"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2016-05-20T15:00:00.000Z" title="2016-05-20T15:00:00.000Z">2016-05-21</time><span class="level-item">5分 read (About 696 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2016/05/20/2016-05-21-jenkins-sonarqube-php-code-metrics/">Jenkins + SonarQube で PHPコードメトリクス計測！</a></h1><div class="content"><h2><span id="前回">前回</span></h2><p>Jenkinsとは別のサーバ上に<br>SonarQube をインストールし<br>アクセスできるまでをまとめました。</p>
<a href="http://kenzo0107.hatenablog.com/entry/2016/05/19/192058" class="link-preview" target="_blank"><div class="link-area"><div class="og-image"><img src="http://i.imgur.com/etIqshd.png"></div><div class="descriptions"><div class="og-title">CentOS7にSonarQubeをインストールしアクセス確認まで - 長生村本郷Engineers&#39;Blog</div><div class="og-description">概要 SonarQube™は Java, Python, Ruby, PHP等、複数言語のコードメトリクス集計ができる 優れものです。 以前 MacOSXローカル環境で Unityプロジェクト C#コードのコードメトリクス抽出方法をまとめました。 kenzo0107.hatena…</div></div></div></a>


<p>今回は Jenkins からソースを解析し<br>SonarQubeでのメトリクス情報を表示までの実行方法をまとめます。</p>
<p>言語は どれでも良いですが、 今回は PHP とします。</p>
<h2><span id="overview">Overview</span></h2><p>以下概要になります。</p>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521003213.png" width="100%">
</div>

<h2><span id="sonarqube側事前準備">SonarQube側事前準備</span></h2><p>プロジェクトを作成しプロジェクトキーを発行します。</p>
<h3><span id="1-ログインページへアクセス">1. ログインページへアクセス</span></h3><p>http://<sonarqube ip>:9000/sessions/new</sonarqube></p>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160520/20160520233944.png" width="100%">
</div>

<p>デフォルトでは以下 admin:admin アカウントでログイン</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td>ID</td>
<td>admin</td>
</tr>
<tr>
<td>PW</td>
<td>admin</td>
</tr>
</tbody></table>
<h3><span id="2-プロジェクト作成">2. プロジェクト作成</span></h3><ul>
<li>ヘッダーメニュー Administration クリックし Administration ページへ遷移</li>
<li>Projects &gt; Management クリック</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160520/20160520234632.png" width="100%">
</div>

<ul>
<li>Create ボタンクリック</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160520/20160520235020.png" width="100%">
</div>

<ul>
<li>Name, Key 入力し</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521000020.png" width="100%">
</div>

<ul>
<li>プロジェクトが追加されたことがわかります。</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521001309.png" width="100%">
</div>

<h3><span id="3-php-plugin-インストール">3. PHP Plugin インストール</span></h3><ul>
<li>Administration ページ System &gt; Update Center クリック</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521002115.png" width="100%">
</div>

<ul>
<li>Available 選択 → 検索窓で「PHP」と入力 → 表示された PHP Plugin でInstallクリック</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521002430.png" width="100%">
</div>

<ul>
<li>Restart でSonarQubeに PHP Plugin インストール</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521002605.png" width="100%">
</div>

<ul>
<li>Installed タブで PHP Plugin がインストールされていることを確認</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521002918.png" width="100%">
</div>

<h3><span id="4-authentication-token-発行">4. authentication token 発行</span></h3><ul>
<li>Security &gt; User クリック</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521005252.png" width="100%">
</div>

<ul>
<li>TOKENS クリックしポップアップ表示</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521005424.png" width="100%">
</div>

<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521005757.png" width="100%">
</div>

<ul>
<li>任意の文字列を入力しcreate</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521005946.png" width="100%">
</div>

<ul>
<li>tokenコピー<br>Jenkins側の設定時に利用します。</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521010037.png" width="100%">
</div>

<p>以上でSonarQube側の事前準備は終了です。</p>
<h2><span id="jenkins-側準備">Jenkins 側準備</span></h2><h3><span id="1-sonarqube-plugin-インストール">1. SonarQube Plugin インストール</span></h3><p>Jenkinsの管理 &gt; Pluginの管理<br>にて SonarQube Plugin インストール</p>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521003400.png" width="100%">
</div>

<h3><span id="2-sonarqube-scanner-インストール">2. SonarQube Scanner インストール</span></h3><p>以下オフィシャルダウンロードページからリンク取得</p>
<p><a href="http://docs.sonarqube.org/display/SCAN/Analyzing+with+SonarQube+Scanner">Analyzing+with+SonarQube+Scanner</a></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /var/lib/jenkins</span><br><span class="line">$ wget https://sonarsource.bintray.com/Distribution/sonar-scanner-cli/sonar-scanner-2.6.1.zip</span><br><span class="line">$ unzip sonar-scanner-2.6.1.zip</span><br><span class="line">$ ln -s sonar-scanner-2.6.1 sonar-scanner</span><br></pre></td></tr></table></figure>

<h3><span id="3-jenkinsシステム設定">3. Jenkinsシステム設定</span></h3><ul>
<li><p>Jenkinsの管理 &gt; システムの設定 へアクセス</p>
</li>
<li><p>JenkinsQube servers に必要項目入力</p>
</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521004429.png" width="100%">
</div>

<ul>
<li>SonarQube Scanner に先ほどインストールした sonar-scannerパスを設定</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521004625.png" width="100%">
</div>

<p>上記入力後保存</p>
<h3><span id="4-ジョブ新規作成">4. ジョブ新規作成</span></h3><p>「sonarqubeTest」という名前のジョブを新規作成します。</p>
<ul>
<li>git リポジトリよりPHPプロジェクト取得設定</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521010200.png" width="100%">
</div>

<ul>
<li>SonarScanner 実行設定</li>
</ul>
<div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521010349.png" width="100%">
</div>

<p>以上でJenkins側の設定完了です。</p>
<h2><span id="sonarqube-反映確認">SonarQube 反映確認</span></h2><div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160521/20160521010726.png" width="100%">
</div>


<p>ちなみにこちら EC-CUBE 1.1のプロジェクトでした。</p>
<p>EC-CUBEのコード重複率が多く<br>無駄が如何に多いかがわかります。</p>
<p>以上です。</p>
</div></article></div><div class="card"><div class="card-image"><a class="image" href="/2016/04/27/2016-04-28-simple-php-linebotapi/"><img class="thumbnail" src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160428/20160428003806.png" alt="とにかくシンプルにPHPでLineBotApiを書きました"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2016-04-27T15:00:00.000Z" title="2016-04-27T15:00:00.000Z">2016-04-28</time><span class="level-item">2分 read (About 311 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2016/04/27/2016-04-28-simple-php-linebotapi/">とにかくシンプルにPHPでLineBotApiを書きました</a></h1><div class="content"><h2><span id="概要">概要</span></h2><p>話題のLine bot Api用スクリプトをPHPで書きました。</p>
<p>とにかくシンプルに = カスタマイズしやすさ</p>
<p>という所で<br>修正する場所を限って利用できるようにしたつもりです。</p>
<h2><span id="作ったもの">作ったもの</span></h2><p>適当に文字を打つと →「hello」<br>perfect と打つと → 「human」</p>
<p>と返すようにした本当にシンプルなものです。</p>
<p>そのロジック部分をカスタマイズすれば<br>マイbotができますね。</p>
<h2><span id="環境">環境</span></h2><ul>
<li>さくらレンタルサーバVPS    CentOS release 6.7 (Final)</li>
<li>PHP 5.6.16</li>
</ul>
<p>SSLは無料のStartSSLを利用しました。取得・設定は以下参照してください。</p>
<a href="http://kenzo0107.hatenablog.com/entry/2016/02/25/112253" class="link-preview" target="_blank"><div class="link-area"><div class="og-image"><img src="http://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160224/20160224185554.png"></div><div class="descriptions"><div class="og-title">無料SSL証明書発行しセキュリティでA+を取る！ 〜Apache編〜 - 長生村本郷Engineers&#39;Blog</div><div class="og-description">概要 ベリトランスモジュールバージョンアップに際して SHA256で発行したSSL証明書が必須となりました。 テスト環境でベリトランスモジュールバージョンアップ試験を行う際に SSL証明書導入する必要が生じました。 本番環境と同じ有料SSLを導入するまでとはいかずとも 近しい状況…</div></div></div></a>



<h2><span id="スクリプト">スクリプト</span></h2><script src="//gist.github.com/kenzo0107/9cc3245b57308aeadff61d3c76413f6b.js"></script>


<p>###</p>
<p><code>function getMessage</code>  でbotに返信させたいメッセージを決定しています。</p>
<p>そこで他APIを呼んだり、サイトからスクレイプしたり情報をとってきて返してあげると<br>簡易的なメッセージ返信Line botできあがりです。</p>
<h2><span id="こんな感じです">こんな感じです！</span></h2><div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160428/20160428003454.png" width="100%">
</div>
</div></article></div><div class="card"><div class="card-image"><a class="image" href="/2016/02/22/2016-02-22-versionup-php-openssl/"><img class="thumbnail" src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20160222/20160222184453.jpg" alt="PHP+OpenSSLバージョンアップ"></a></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2016-02-22T15:00:00.000Z" title="2016-02-22T15:00:00.000Z">2016-02-23</time><span class="level-item">7分 read (About 1117 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2016/02/22/2016-02-22-versionup-php-openssl/">PHP+OpenSSLバージョンアップ</a></h1><div class="content"><h2><span id="概要">概要</span></h2><p>ベリトランスモジュールのバージョンアップに際して<br><font color="red">2016年以内に</font>SSL v3.0/TLS 1.0無効化処理が必須となりました。</p>
<p>世界的なセキュリティ対策の一環として必須事項なので<br>ベリトランス以外の決済も、また決済以外でもシステムの対策必須です。</p>
<p><a href="http://internet.watch.impress.co.jp/docs/news/20141015_671482.html">Google、SSL 3.0の脆弱性「POODLE」を公表、SSL 3.0は今後サポート廃止の意向</a></p>
<p>EC-CUBEでベリトランスの決済モジュールでは<br>PHPからOpenSSLライブラリを利用して決済へ通信を実施しています。</p>
<p>そのPHPのOpenSSLライブラリを1.0.1i以上(最新が推奨)に<br>バージョンアップする必要があります。</p>
<p>対応する ToDoとしては以下になります。</p>
<blockquote>
<p>TLS1.1以上を利用するには openssl 1.0.1i 以上を利用する必要アリ<br>→ openssl バージョンアップ (1.0.1i以上)<br>→ PHP の再コンパイルし OpenSSLライブラリ(1.0.1i以上)をバージョンアップ</p>
</blockquote>
<p>上記対応をまとめました。</p>
<p>※ ApacheのSSL v3.0/TLS1.0利用不可設定は別途<br>ググればすぐ出てきます♪</p>
<h2><span id="環境">環境</span></h2><ul>
<li>CentOS release 6.6 (Final)</li>
<li>PHP 5.3.9</li>
<li>openssl 1.0.1g</li>
</ul>
<h2><span id="手順">手順</span></h2><h3><span id="php-で利用している-openssl-のライブラリバージョン確認">PHP で利用している OpenSSL のライブラリバージョン確認</span></h3><p>これからPHPをコンパイルし直すので<br>OpenSSL support が disableでも問題ないです。</p>
<p>※今回では既にインストール済みであるというケースを想定しています。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># php -i | grep OpenSSL</span><br><span class="line"></span><br><span class="line">OpenSSL support &#x3D;&gt; enabled</span><br><span class="line">OpenSSL Library Version &#x3D;&gt; OpenSSL 1.0.1g  28 Jan 2016</span><br><span class="line">OpenSSL Header Version &#x3D;&gt; OpenSSL 1.0.1g  28 Jan 2016</span><br><span class="line">OpenSSL support &#x3D;&gt; enabled</span><br></pre></td></tr></table></figure>

<p>PHPでで利用されるOpenSSL Library, Header Version が <code>1.0.1g</code> であることが確認できました。</p>
<h3><span id="既存openssl-バックアップ">既存openssl バックアップ</span></h3><p>既にインストール済みかと思いますので<br>現行バージョンを一旦退避します。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># openssl version</span><br><span class="line">1.0.1g</span><br><span class="line"></span><br><span class="line"># which openssl</span><br><span class="line">&#x2F;usr&#x2F;local&#x2F;bin&#x2F;openssl</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 名前変更でバックアップとして残す</span><br><span class="line"># mv &#x2F;usr&#x2F;local&#x2F;bin&#x2F;openssl &#x2F;usr&#x2F;local&#x2F;bin&#x2F;openssl1.0.1g</span><br></pre></td></tr></table></figure>

<p>何か不具合が発生した場合にまきもどせるように、念のためバックアップをとりました。</p>
<h2><span id="openssl-バージョンアップ">openssl バージョンアップ</span></h2><p>ソースからビルドします。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># cd &#x2F;usr&#x2F;local&#x2F;src</span><br><span class="line"># wget http:&#x2F;&#x2F;www.openssl.org&#x2F;source&#x2F;openssl-1.0.2f.tar.gz</span><br><span class="line"># tar xzvf openssl-1.0.2f.tar.gz</span><br><span class="line"># cd openssl-1.0.2f</span><br><span class="line"># .&#x2F;config --prefix&#x3D;&#x2F;usr&#x2F;local shared -fPIC</span><br><span class="line"># make</span><br><span class="line"># make install</span><br></pre></td></tr></table></figure>

<p>-fPIC は 動的共有オブジェクト(DSO)としてmod_sslをビルドし<br>PHPのバイナリ実行ファイルからフックして利用する為に必要、<br>と言ったところでしょうか。</p>
<h2><span id="openssl-バージョンアップ確認">openssl バージョンアップ確認</span></h2><p>正しくバージョンアップされていることを確認しました。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># openssl version</span><br><span class="line"></span><br><span class="line">OpenSSL 1.0.2f  28 Jan 2016</span><br></pre></td></tr></table></figure>

<h2><span id="php再コンパイル">PHP再コンパイル</span></h2><ul>
<li>既存PHPがどのようにconfigureされているか確認</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># php -i | grep config</span><br><span class="line"></span><br><span class="line">Configure Command &#x3D;&gt;  &#39;.&#x2F;configure&#39;  &#39;--enable-mbstring&#39; &#39;--enable-zend-multibyte&#39; &#39;--with-mysql&#39; &#39;--with-mysqli&#39; &#39;--enable-mbregex&#39; &#39;--with-gd&#39; &#39;--with-jpeg-dir&#x3D;&#x2F;usr&#x2F;lib&#39; &#39;--with-png-dir&#x3D;&#x2F;usr&#x2F;lib&#39; &#39;--with-freetype-dir&#x3D;&#x2F;usr&#x2F;lib&#39; &#39;--with-zlib-dir&#39; &#39;--with-libdir&#x3D;lib64&#39; &#39;--enable-soap&#39; &#39;--with-apxs2&#x3D;&#x2F;etc&#x2F;httpd&#x2F;bin&#x2F;apxs&#39; &#39;--with-openssl&#x3D;&#x2F;usr&#x2F;local&#39;</span><br></pre></td></tr></table></figure>

<p><code>--with-openssl</code> がない場合は上記のように追加します。<br>今回は既に指定済みです。</p>
<p>上記のconigure情報を利用して<br>–with-opensslがあることを確認した上で<br>再コンパイルします。</p>
<ul>
<li>再コンパイル</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># cd &#x2F;usr&#x2F;local&#x2F;src&#x2F;php-5.3.9</span><br><span class="line"># .&#x2F;configure --enable-mbstring --enable-zend-multibyte --with-mysql --with-mysqli --enable-mbregex --with-gd --with-jpeg-dir&#x3D;&#x2F;usr&#x2F;lib --with-png-dir&#x3D;&#x2F;usr&#x2F;lib --with-freetype-dir&#x3D;&#x2F;usr&#x2F;lib --with-zlib-dir --with-libdir&#x3D;lib64 --enable-soap --with-apxs2&#x3D;&#x2F;etc&#x2F;httpd&#x2F;bin&#x2F;apxs --with-openssl&#x3D;&#x2F;usr&#x2F;local</span><br><span class="line"># make</span><br><span class="line"># make install</span><br></pre></td></tr></table></figure>

<p>以下のようなエラーが出る場合は、手順)「openssl バージョンアップ」をご確認下さい。<br>新たにopensslをソースからコンパイルしてビルドしたときなどに出るエラーです。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">configure: error: Cannot find OpenSSL&#39;s &lt;evp.h&gt;</span><br></pre></td></tr></table></figure>


<h2><span id="phpで利用するopenssl-ライブラリのバージョン確認">PHPで利用するOpenSSL ライブラリのバージョン確認</span></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># php -i | grep OpenSSL</span><br><span class="line"></span><br><span class="line">OpenSSL support &#x3D;&gt; enabled</span><br><span class="line">OpenSSL Library Version &#x3D;&gt; OpenSSL 1.0.2f  28 Jan 2016</span><br><span class="line">OpenSSL Header Version &#x3D;&gt; OpenSSL 1.0.2f  28 Jan 2016</span><br><span class="line">OpenSSL support &#x3D;&gt; enabled</span><br></pre></td></tr></table></figure>

<p>OpenSSL Library, Header Version が共に指定通りとなりました。</p>
<p>以上です。</p>
</div></article></div></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="kenzo0107"></figure><p class="title is-size-4 is-block line-height-inherit">kenzo0107</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">投稿</p><a href="/archives"><p class="title">300</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">カテゴリ</p><a href="/categories"><p class="title">5</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">タグ</p><a href="/tags"><p class="title">88</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/kenzo0107" target="_blank" rel="noopener">フォローする</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/kenzo0107"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/kenzo0107"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">カテゴリ</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/AWS/"><span class="level-start"><span class="level-item">AWS</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/DIY/"><span class="level-start"><span class="level-item">DIY</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Go/"><span class="level-start"><span class="level-item">Go</span></span><span class="level-end"><span class="level-item tag">26</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/RaspberryPI/"><span class="level-start"><span class="level-item">RaspberryPI</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Terraform/"><span class="level-start"><span class="level-item">Terraform</span></span><span class="level-end"><span class="level-item tag">10</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最近の記事</h3><article class="media"><a class="media-left" href="/2022/03/12/2022-03-13-maintenance-mode-for-alb-or-cloudfront/"><p class="image is-64x64"><img class="thumbnail" src="https://i.imgur.com/IwHAByw.png" alt="AWS ALB/CloudFront でのメンテナンス切り替え方法"></p></a><div class="media-content size-small"><p><time dateTime="2022-03-12T15:00:00.000Z">2022-03-13</time></p><p class="title is-6"><a class="link-muted" href="/2022/03/12/2022-03-13-maintenance-mode-for-alb-or-cloudfront/">AWS ALB/CloudFront でのメンテナンス切り替え方法</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/AWS/">AWS</a></p></div></article><article class="media"><a class="media-left" href="/2022/03/12/2022-03-25-fluentbit-get-key-from-nested-list/"><p class="image is-64x64"><img class="thumbnail" src="https://i.imgur.com/zlOM1Ii.png" alt="fluentbit エラー 「Value of key &#039;xxx&#039; is not a map. Will not attempt to lift from here」対応"></p></a><div class="media-content size-small"><p><time dateTime="2022-03-12T15:00:00.000Z">2022-03-13</time></p><p class="title is-6"><a class="link-muted" href="/2022/03/12/2022-03-25-fluentbit-get-key-from-nested-list/">fluentbit エラー 「Value of key &#039;xxx&#039; is not a map. Will not attempt to lift from here」対応</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/AWS/">AWS</a></p></div></article><article class="media"><a class="media-left" href="/2022/02/09/2022-02-10-cloudfront-managed-prefix/"><p class="image is-64x64"><img class="thumbnail" src="https://i.imgur.com/raMMbxt.png" alt="terraform で CloudFront マネージドプリフィックスリストを利用したアクセス制限"></p></a><div class="media-content size-small"><p><time dateTime="2022-02-09T15:00:00.000Z">2022-02-10</time></p><p class="title is-6"><a class="link-muted" href="/2022/02/09/2022-02-10-cloudfront-managed-prefix/">terraform で CloudFront マネージドプリフィックスリストを利用したアクセス制限</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/AWS/">AWS</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2022-01-14T15:00:00.000Z">2022-01-15</time></p><p class="title is-6"><a class="link-muted" href="/2022/01/14/2022-01-15-aws-elasticache-redis-cpu-utilization-unnormally-up/">2022-01-15 昼頃に発生した AWS ElastiCache CPU 使用率の異常上昇について</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/AWS/">AWS</a></p></div></article><article class="media"><a class="media-left" href="/2022/01/05/2022-01-06-raspberrypi-co2-monitoring/"><p class="image is-64x64"><img class="thumbnail" src="https://i.imgur.com/C3bQR5g.jpeg" alt="Raspberry PI zero で CO2 濃度測定 &amp; アラートを LINE 通知"></p></a><div class="media-content size-small"><p><time dateTime="2022-01-05T15:00:00.000Z">2022-01-06</time></p><p class="title is-6"><a class="link-muted" href="/2022/01/05/2022-01-06-raspberrypi-co2-monitoring/">Raspberry PI zero で CO2 濃度測定 &amp; アラートを LINE 通知</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/RaspberryPI/">RaspberryPI</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">タグ</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/htaccess/"><span class="tag">.htaccess</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ALB/"><span class="tag">ALB</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AWS/"><span class="tag">AWS</span><span class="tag is-grey-lightest">43</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ansible/"><span class="tag">Ansible</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AntiVirus/"><span class="tag">AntiVirus</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apache/"><span class="tag">Apache</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Chef/"><span class="tag">Chef</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CodeBuild/"><span class="tag">CodeBuild</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Cookie/"><span class="tag">Cookie</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Corosync/"><span class="tag">Corosync</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Datadog/"><span class="tag">Datadog</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ECR/"><span class="tag">ECR</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ECS/"><span class="tag">ECS</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ElastiCache/"><span class="tag">ElastiCache</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Elasticsearch/"><span class="tag">Elasticsearch</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Email/"><span class="tag">Email</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FTPS/"><span class="tag">FTPS</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Fluentd/"><span class="tag">Fluentd</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GKE/"><span class="tag">GKE</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GitHub-Actions/"><span class="tag">GitHub Actions</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Go/"><span class="tag">Go</span><span class="tag is-grey-lightest">24</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GooglePlay/"><span class="tag">GooglePlay</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hubot/"><span class="tag">Hubot</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Jenkins/"><span class="tag">Jenkins</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kibana/"><span class="tag">Kibana</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LINE-Notify/"><span class="tag">LINE Notify</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Lambda/"><span class="tag">Lambda</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Let-s-encrypt/"><span class="tag">Let&#039;s encrypt</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MachineLearning/"><span class="tag">MachineLearning</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Monitoring/"><span class="tag">Monitoring</span><span class="tag is-grey-lightest">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MySQL/"><span class="tag">MySQL</span><span class="tag is-grey-lightest">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Nginx/"><span class="tag">Nginx</span><span class="tag is-grey-lightest">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenSSL/"><span class="tag">OpenSSL</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Outlook/"><span class="tag">Outlook</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PHP/"><span class="tag">PHP</span><span class="tag is-grey-lightest">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pacemaker/"><span class="tag">Pacemaker</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Prometheus/"><span class="tag">Prometheus</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ProxySQL/"><span class="tag">ProxySQL</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Puppeteer/"><span class="tag">Puppeteer</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag is-grey-lightest">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Rails/"><span class="tag">Rails</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RaspberryPI/"><span class="tag">RaspberryPI</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Reactio/"><span class="tag">Reactio</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Redis/"><span class="tag">Redis</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ruby/"><span class="tag">Ruby</span><span class="tag is-grey-lightest">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/S3/"><span class="tag">S3</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SSL/"><span class="tag">SSL</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Security/"><span class="tag">Security</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SendGrid/"><span class="tag">SendGrid</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Slack/"><span class="tag">Slack</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SonarQube/"><span class="tag">SonarQube</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/StatsBot/"><span class="tag">StatsBot</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Swift/"><span class="tag">Swift</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Terraform/"><span class="tag">Terraform</span><span class="tag is-grey-lightest">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Twilio/"><span class="tag">Twilio</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Unity/"><span class="tag">Unity</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vagrant/"><span class="tag">Vagrant</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vault/"><span class="tag">Vault</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WAF/"><span class="tag">WAF</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Zabbix/"><span class="tag">Zabbix</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/awk/"><span class="tag">awk</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/casperjs/"><span class="tag">casperjs</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cpu/"><span class="tag">cpu</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csv/"><span class="tag">csv</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flask/"><span class="tag">flask</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/i-node/"><span class="tag">i-node</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iftop/"><span class="tag">iftop</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ipinfo/"><span class="tag">ipinfo</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iptable/"><span class="tag">iptable</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kibana/"><span class="tag">kibana</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macos/"><span class="tag">macos</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/no-ip/"><span class="tag">no-ip</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ping/"><span class="tag">ping</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pip/"><span class="tag">pip</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/reCAPTCHA/"><span class="tag">reCAPTCHA</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sftp/"><span class="tag">sftp</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spam/"><span class="tag">spam</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssh/"><span class="tag">ssh</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vim/"><span class="tag">vim</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wget/"><span class="tag">wget</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/yum/"><span class="tag">yum</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/zsh/"><span class="tag">zsh</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">Advertisement</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6265337967545472" data-ad-slot="9975280607" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="長生村本郷Engineers&#039;Blog" height="28"></a><p class="size-small"><span>&copy; 2022 Kenzo Tanaka</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("ja");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://kenzo0107.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: ''
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="Zurück nach oben" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"投稿","pages":"Pages","categories":"カテゴリ","tags":"タグ"});
        });</script></body></html>