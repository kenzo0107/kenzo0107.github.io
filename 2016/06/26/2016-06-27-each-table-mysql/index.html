<div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2016-06-26T15:00:00.000Z" title="2016-06-26T15:00:00.000Z">2016-06-27</time><span class="level-item">1分 read (About 182 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">MySQL テーブル単位の容量確認</h1><div class="content"><ul>
<li>SQL</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use zabbix</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line">mysql&gt; select</span><br><span class="line">    -&gt; table_name, engine, table_rows as tbl_rows, avg_row_length as rlen,</span><br><span class="line">    -&gt; floor((data_length+index_length)&#x2F;1024&#x2F;1024) as allMB,  #総容量</span><br><span class="line">    -&gt; floor((data_length)&#x2F;1024&#x2F;1024) as dMB,  #データ容量</span><br><span class="line">    -&gt; floor((index_length)&#x2F;1024&#x2F;1024) as iMB   #インデックス容量</span><br><span class="line">    -&gt; from information_schema.tables</span><br><span class="line">    -&gt; where table_schema&#x3D;database()</span><br><span class="line">    -&gt; order by (data_length+index_length) desc;</span><br></pre></td></tr></table></figure>

<ul>
<li>実行結果</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">+----------------------------+--------+----------+-------+-------+------+------+</span><br><span class="line">| table_name                 | engine | tbl_rows | rlen  | allMB | dMB  | iMB  |</span><br><span class="line">+----------------------------+--------+----------+-------+-------+------+------+</span><br><span class="line">| history                    | InnoDB | 23815217 |    51 |  1802 | 1179 |  623 |</span><br><span class="line">| history_uint               | InnoDB | 21709131 |    51 |  1646 | 1075 |  571 |</span><br><span class="line">| trends_uint                | InnoDB |    45152 |   650 |    28 |   28 |    0 |</span><br><span class="line">| trends                     | InnoDB |    30965 |   914 |    27 |   27 |    0 |</span><br><span class="line">| history_str                | InnoDB |   129224 |   109 |    19 |   13 |    5 |</span><br><span class="line">| items                      | InnoDB |     2242 |   708 |     2 |    1 |    0 |</span><br><span class="line">| images                     | InnoDB |      144 | 11036 |     1 |    1 |    0 |</span><br><span class="line">| items_applications         | InnoDB |     2468 |    66 |     0 |    0 |    0 |</span><br><span class="line">| triggers                   | InnoDB |      805 |   223 |     0 |    0 |    0 |</span><br><span class="line">| graphs_items               | InnoDB |      948 |   103 |     0 |    0 |    0 |</span><br><span class="line">| functions                  | InnoDB |      833 |    98 |     0 |    0 |    0 |</span><br><span class="line">| events                     | InnoDB |      718 |   114 |     0 |    0 |    0 |</span><br><span class="line">| alerts                     | InnoDB |       88 |   930 |     0 |    0 |    0 |</span><br><span class="line">| graphs                     | InnoDB |      329 |   248 |     0 |    0 |    0 |</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>ちなみに上記は Zabbix DBの結果<br>history (履歴) にデータが肥大化傾向にあるので<br>パーティション や Zabbix housekeeping での<br>保存期間設定を調整するなど必要なことがわかります。</p>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/MySQL/">MySQL</a></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_dd" href="https://www.addtoany.com/share"></a><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_telegram"></a><a class="a2a_button_whatsapp"></a><a class="a2a_button_reddit"></a></div><script src="https://static.addtoany.com/menu/page.js" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">Gefällt Ihnen der Artikel? Unterstützen Sie den Autor mit</h3><div class="buttons is-centered"><a class="button is-danger donate" href="https://www.patreon.com/kenzo0107" target="_blank" rel="noopener"><span class="icon is-small"><i class="fab fa-patreon"></i></span><span>Patreon</span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2016/07/10/2016-07-11-install-pip-on-centos5/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">CentOS5 系 に pip インストール</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2016/06/26/2016-06-27-ssl-qualys-get-a-plus/"><span class="level-item">2016年5月現在、SSL評価Fを取らない為に</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!-->