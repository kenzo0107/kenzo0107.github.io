<!doctype html>
<html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>カテゴリ: Go - 長生村本郷Engineers&#039;Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="長生村本郷Engineers&#039;Blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="長生村本郷Engineers&#039;Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="tech"><meta property="og:type" content="blog"><meta property="og:title" content="長生村本郷Engineers&#039;Blog"><meta property="og:url" content="https://kenzo0107.github.io/"><meta property="og:site_name" content="長生村本郷Engineers&#039;Blog"><meta property="og:description" content="tech"><meta property="og:locale" content="ja_JP"><meta property="og:image" content="https://kenzo0107.github.io/img/og_image.png"><meta property="article:author" content="Kenzo Tanaka"><meta property="article:tag" content="aws golang"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://kenzo0107.github.io/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://kenzo0107.github.io"},"headline":"長生村本郷Engineers'Blog","image":["https://kenzo0107.github.io/img/og_image.png"],"author":{"@type":"Person","name":"Kenzo Tanaka"},"publisher":{"@type":"Organization","name":"長生村本郷Engineers'Blog","logo":{"@type":"ImageObject","url":"https://kenzo0107.github.io/img/logo.svg"}},"description":"tech"}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-162026478-1" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-162026478-1');</script><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><script data-ad-client="ca-pub-6265337967545472" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="長生村本郷Engineers'Blog" type="application/atom+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="長生村本郷Engineers&#039;Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/2013/12/31/about/">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/kenzo0107"><i class="fab fa-github"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/kenzo0107"><i class="fab fa-twitter"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a><a class="navbar-item search" title="検索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-10-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/categories">カテゴリ</a></li><li class="is-active"><a href="#" aria-current="page">Go</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">2015-08-30</span><span class="level-item"><a class="link-muted" href="/categories/Go/">Go</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/08/29/2015-08-30-go-revel-fw-jquery/">Go Revelフレームワーク jQuery非同期処理</a></h1><div class="content"><h2><span id="概要">概要</span></h2><p>Go RevelフレームワークでAjax非同期処理を実装します。</p>
<h2><span id="csrf-対策">CSRF 対策</span></h2><p>以下コマンドにより<br>RevelフレームワークでCSFR対策する為のライブラリをインストール</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ go get github.com/cbonello/revel-csrf</span><br></pre></td></tr></table></figure>

<ul>
<li>app/init.go</li>
</ul>
<p>ajax実行時にCSRFチェックする為、init.goでのチェックを外すように設定</p>
<a href="https://gist.github.com/kenzo0107/2cc980f35c8753f7ccdf" class="link-preview" target="_blank"><div class="link-area"><div class="og-image"><img src="https://github.githubassets.com/assets/gist-og-image-54fd7dc0713e.png"></div><div class="descriptions"><div class="og-title">init.go</div><div class="og-description">GitHub Gist: instantly share code, notes, and snippets.</div></div></div></a>



<p>以下CSRFのFilter設定</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line">    revel.Filters = []revel.Filter&#123;</span><br><span class="line">        ...</span><br><span class="line">        ...</span><br><span class="line">        csrf.CSRFFilter,               <span class="comment">// CSRF prevention.</span></span><br><span class="line">        ...</span><br></pre></td></tr></table></figure>

<p><code>conf/routes</code> で実行するAPIのURLはAjax実行時にCSRFチェックする為、<br>init.goではチェックを対象外とする様に設定</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">csrf.ExemptedFullPath(<span class="string">&quot;/api_execute&quot;</span>)</span><br></pre></td></tr></table></figure>


<h2><span id="view側の設定">View側の設定</span></h2><ul>
<li>views/header.html</li>
</ul>
<p><code>&lt;head&gt;〜&lt;/head&gt;</code> 内にCSRFチェック用ハッシュ値をmeta情報として埋め込みます。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;csrf-token&quot;</span> <span class="attr">content</span>=<span class="string">&quot;&#123;&#123; .csrf_token &#125;&#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2><span id="jqueryファイル">jQueryファイル</span></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">setAjaxToken</span>(<span class="params"> token </span>) &#123;</span><br><span class="line">    <span class="comment">// ajax --- start --------------------------------------------------</span></span><br><span class="line">    $.<span class="title function_">ajaxSetup</span>(&#123;</span><br><span class="line">    	<span class="attr">crossDomain</span>: <span class="literal">false</span>,</span><br><span class="line">    	<span class="attr">beforeSend</span>: <span class="keyword">function</span>(<span class="params">xhr, settings</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="title function_">csrfSafeMethod</span>(settings.<span class="property">type</span>)) &#123;</span><br><span class="line">                xhr.<span class="title function_">setRequestHeader</span>(<span class="string">&quot;X-CSRFToken&quot;</span>, token );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$(<span class="variable language_">document</span>).<span class="title function_">ready</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="variable language_">document</span>).<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>, <span class="string">&quot;.ajax_execute&quot;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">	event.<span class="title function_">preventDefault</span>();</span><br><span class="line"></span><br><span class="line">    	<span class="title function_">setAjaxToken</span>( postData[<span class="string">&#x27;_token&#x27;</span>] );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> ajaxParamas = &#123;&#125;;</span><br><span class="line">    	ajaxParamas[<span class="string">&quot;type&quot;</span>]		= <span class="string">&quot;POST&quot;</span>;</span><br><span class="line">    	ajaxParamas[<span class="string">&quot;url&quot;</span>]		= action;</span><br><span class="line">    	ajaxParamas[<span class="string">&quot;data&quot;</span>]		= postData;</span><br><span class="line">    	ajaxParamas[<span class="string">&quot;cache&quot;</span>]	= <span class="literal">false</span>;</span><br><span class="line">    	ajaxParamas[<span class="string">&quot;dataType&quot;</span>]	= <span class="string">&quot;json&quot;</span>;</span><br><span class="line"></span><br><span class="line">        $.<span class="title function_">ajax</span>(ajaxParamas)</span><br><span class="line">        .<span class="title function_">success</span>( <span class="keyword">function</span>(<span class="params">res</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;(^-^) OK&quot;</span>)</span><br><span class="line">        &#125;).<span class="property">error</span> ( <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;(&gt;_&lt;) NG&quot;</span>)</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>簡単…とは行ってない気がしますが<br>CSRF対策ができました。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">2015-08-20</span><span class="level-item"><a class="link-muted" href="/categories/Go/">Go</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/08/19/2015-08-20-beginner-gopher/">Go初心者におすすめ本</a></h1><div class="content"><h2><span id="概要">概要</span></h2><p>身の回りであまり Go を積極的にやっている人がいないので<br>やってみたいなぁ、気になってはいる、<br>という方に本をおすすめしてみたいと思いました。</p>
<h2><span id="この一冊">この一冊！</span></h2><p>以下をチョイスしました！</p>
<a href="https://www.amazon.co.jp/exec/obidos/ASIN/4774166278/kenzo0107-22/" class="link-preview" target="_blnak"><div class="link-area"><div class="descriptions"><div class="og-title">Amazon.co.jp: WEB+DB PRESS Vol.82 : 山口 徹, Jxck, 佐々木 大輔, 横路 隆, 加来 純一, 山本 伶, 大平 武志, 米川 健一, 坂本 登史文, 若原 祥正, 和久田 龍, 平栗 遵宜, 伊藤 直也, 佐藤 太一, 高橋 俊幸, 海野 弘成, 五嶋 壮晃, 佐藤 歩, 吉村 総一郎, 橋本 翔, 舘野 祐一, 中島 聡, 渡邊 恵太, はまちや2, 竹原, 河合 宜文, WEB+DB PRESS編集部: 本</div><div class="og-description">Amazon.co.jp: WEB+DB PRESS Vol.82 : 山口 徹, Jxck, 佐々木 大輔, 横路 隆, 加来 純一, 山本 伶, 大平 武志, 米川 健一, 坂本 登史文, 若原 祥正, 和久田 龍, 平栗 遵宜, 伊藤 直也, 佐藤 太一, 高橋 俊幸, 海…</div></div></div></a>

<h2><span id="よかった点">よかった点</span></h2><ul>
<li>全部で 34 ページ！1 日で読み終わり、逆引きとしても利用できる。(Go のオフィシャルのチュートリアルをまとめてくれてる感じ)</li>
<li>Go の成り立ちを簡潔に説明しており、クロスコンパイルや並列処理サポートなどがあり Go の使いどころがわかる。</li>
<li>ちょうど「Web API デザインの鉄則」という特集があり、API 開発にはちょうど良い内容の一冊だった。</li>
</ul>
<p>特に本を紹介して自分にお金が入ることはないので<br>斜めから見ずにまず本見てみてください ♪</p>
<h2><span id="go-を使いたくなる記事">Go を使いたくなる記事</span></h2><h4><span id="json-シリアライズし秒間のレスポンス回数測定">JSON シリアライズし秒間のレスポンス回数測定</span></h4><div style="text-align:center;">
<img src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20150820/20150820002200.png" width="100%">
</div>

<p>以下 Qiita 記事でまとめてくれていました。</p>
<p><a target="_blank" rel="noopener" href="https://qiita.com/2KB/items/7a743033d8d1a87f1b72">「最速」フルスタック Web フレームワーク「revel」の紹介</a></p>
<h2><span id="個人的に好きな所">個人的に好きな所</span></h2><ul>
<li>while や do/while 、参考演算子がなく for のみ、とか冗長なコーディングを許さない</li>
<li>gofmt でフォーマット化してくれる。いつもコミット前にやってます。</li>
<li>ライブラリ増えてる。 Python の<code>pip install</code>みたく <code>go get</code>でインストール可。</li>
<li>ネイティブなのでアプリケーションが大きくなってもさほど遅くならない。</li>
</ul>
<p>以上<br>Gopher とお話できる機会が増えると何よりです。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">2015-08-19</span><span class="level-item"><a class="link-muted" href="/categories/Go/">Go</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/08/18/2015-08-19-go-get-executable-file-not-found/">go get で 「exec: &quot;bzr&quot;: executable file not found in $PATH」エラー対策</a></h1><div class="content"><h2><span id="結論">結論</span></h2><p>bzrモジュールインストールした後、再度<code>go get</code>して問題なく動作しました。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># yum install -y bzr</span><br></pre></td></tr></table></figure>



<h2><span id="概要">概要</span></h2><p>EC2のCentOS7で<br>以下のように <code>go get</code> した際に<code>bzrが見当たらない</code>というエラーが発生した。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ go get launchpad.net/goamz/aws</span><br><span class="line"></span><br><span class="line">[centos@ip-xxx-xx-xx-xx src]$ go get launchpad.net/goamz/aws</span><br><span class="line">go: missing Bazaar command. See http://golang.org/s/gogetcmd</span><br><span class="line">package launchpad.net/goamz/aws: exec: &quot;bzr&quot;: executable file not found in $PATH</span><br></pre></td></tr></table></figure>

<p>ちょこっとしたつまづきでした。</p>
<h2><span id="ちなみに">ちなみに</span></h2><p><code>bzr</code>はgitと同様、分散バージョン管理システムです。</p>
<p>今回インストールしようとしたPackageがBazaarで管理していたから必要になったのでしょう。</p>
<p>以下参照<br><a target="_blank" rel="noopener" href="http://doc.bazaar.canonical.com/beta/ja/user-reference/index.html">Bazaarユーザーリファレンス</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">2015-08-19</span><span class="level-item"><a class="link-muted" href="/categories/Go/">Go</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/08/18/2015-08-19-go-revel-fw-tls-handshake-error/">Golang Revelフレームワークエラー 「server.go:1775: http: TLS handshake error from 127.0.0.1:36799: tls: first record does not look like a TLS handshake」対応</a></h1><div class="content"><h2><span id="結論">結論</span></h2><p>[prod]モード以外で <code>http.ssl = true</code> とし起動すると発生するエラーでした。<br>その為、[prod]以外では <code>http.ssl = false</code> として起動することとしました。</p>
<h2><span id="概要">概要</span></h2><p>テスト環境で <code>app.conf</code> にて<code>[test]モード</code>を追加し<br>そこでオレオレ SSL 証明書作成して https リンクの動作確認をしようとしてました。</p>
<p>ですが、起動こそするものの一向にアクセスできず汗</p>
<p>dev モードではアクセス出来るのでその差分を見たところ、上記の結論に至りました。</p>
<h2><span id="エラー内容">エラー内容</span></h2><p>revel 起動し url にアクセスすると以下のような TLS ハンドシェイクができずアクセスできない状況になる。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ revel run myapp test</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">INFO  2015/08/19 14:48:38 harness.go:165: Listening on :9000</span><br><span class="line">2015/08/19 14:48:40 server.go:1775: http: TLS handshake error from 127.0.0.1:36799: tls: first record does not look like a TLS handshake</span><br></pre></td></tr></table></figure>
</div></article></div><div class="card"><div class="card-image"><a class="image is-7by3" href="/2015/08/18/2015-08-19-gosql-driver-mysql-created_at-utc/"><img class="thumbnail" src="https://cdn-ak.f.st-hatena.com/images/fotolife/k/kenzo0107/20150819/20150819234635.gif" alt="go-sql-driver/mysqlでcreated_at (datetime) がUTCで登録されてしまう件"></a></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">2015-08-19</span><span class="level-item"><a class="link-muted" href="/categories/Go/">Go</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/08/18/2015-08-19-gosql-driver-mysql-created_at-utc/">go-sql-driver/mysqlでcreated_at (datetime) がUTCで登録されてしまう件</a></h1><div class="content"><h2><span id="環境">環境</span></h2><ul>
<li>go-sql-driver/mysql version 1.2</li>
</ul>
<h2><span id="結論">結論</span></h2><p>以下のように <code>parseTime=true</code>と<code>loc=Asia%2FTokyo</code>を設定する。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db, err := sql.Open(&quot;mysql&quot;, &quot;user:passward@/dbname?parseTime=true&amp;loc=Asia%2FTokyo&quot;)</span><br></pre></td></tr></table></figure>

<p><code>loc=xxxx</code>の指定がない場合、<code>local</code>が指定され、<br>datetime に time.Now()を指定して INSERT しても<br>UTC 時間に書き直されてしまう。</p>
<p>ちょっとハマりました。</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">2015-08-12</span><span class="level-item"><a class="link-muted" href="/categories/Go/">Go</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2015/08/11/2015-08-21-go-revel-fw-hotdeploy/">Golang Revelフレームワーク ホットデプロイ方法</a></h1><div class="content"><h2><span id="概要">概要</span></h2><p>Revel Official サイトにあるデプロイ方法を検証しました。</p>
<p><a target="_blank" rel="noopener" href="https://revel.github.io/manual/deployment.html">Revel Deployment</a></p>
<ol>
<li>ローカルでアプリをビルドしサーバにコピーする</li>
<li>サーバーで更新したコードを pull し、ビルド・起動する</li>
<li>Heroku を利用しデプロイ管理する</li>
</ol>
<h2><span id="1-ローカルビルド">1. ローカルビルド</span></h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># アプリを実行しテストする</span><br><span class="line">$ revel run import/path/to/app</span><br><span class="line"></span><br><span class="line"># パッケージ化</span><br><span class="line">$ revel package import/path/to/app</span><br><span class="line">Your archive is ready: app.tar.gz</span><br><span class="line"></span><br><span class="line"># 対象マシンへコピー</span><br><span class="line">$ scp app.tar.gz target:/srv/</span><br><span class="line"></span><br><span class="line"># ターゲットマシンで起動</span><br><span class="line">$ ssh target</span><br><span class="line">$ cd /srv/</span><br><span class="line">$ tar xzvf app.tar.gz</span><br><span class="line">$ bash run.sh</span><br></pre></td></tr></table></figure>

<p>開発しているアーキテクチャと同じ環境へデプロイする場合、<br>もしくは go インストールを設定し、デフォルトで希望するアーキテクチャへビルドするための唯一の方法です。</p>
<h2><span id="2-追加デプロイメント">2. 追加デプロイメント</span></h2><p>フルセットアセット付きの静的にリンクされたバイナリが巨大になる可能性があるので、<br>追加デプロイをサポートしています。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># アプリを一時ディレクトリにビルド</span><br><span class="line">$ revel build import/path/to/app /tmp/app</span><br><span class="line"></span><br><span class="line"># サーバのhomeディレクトリにその一時ディレクトリにrsync</span><br><span class="line">$ rsync -vaz --rsh=&quot;ssh&quot; /tmp/app server</span><br><span class="line"></span><br><span class="line"># サーバーに接続しアプリを再起動</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>rsync は ssh でのコピーをサポートしているので、以下のように複雑にはなりますがデプロイ可能です。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># カスタム証明書、ログイン名、対象ディレクトリを指定しrsync</span><br><span class="line">$ rsync -vaz --rsh=&quot;ssh -i .ssh/go.pem&quot; /tmp/myapp2 ubuntu@ec2-50-16-80-4.compute-1.amazonaws.com:~/rsync</span><br></pre></td></tr></table></figure>

<h2><span id="3-サーバでビルド">3. サーバでビルド</span></h2><p>この方法はバージョンコントロールシステムに依存します。<br>Go をインストールしているサーバーが必要です。<br>その代わり、クロスコンパイルを回避することができます。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ssh server</span><br><span class="line">... install go ...</span><br><span class="line">... configure your app repository ...</span><br><span class="line"></span><br><span class="line"># appディレクトリに移動し pullしサーバー起動する</span><br><span class="line">$ cd gocode/src/import/path/to/app</span><br><span class="line">$ git pull</span><br><span class="line">$ revel run import/path/to/app prod</span><br></pre></td></tr></table></figure>

<h2><span id="総評">総評</span></h2><p>現在社内では、<code>1. ローカルビルド</code> のデプロイ方法を選択しています。</p>
<p><code>2. 追加デプロイメント</code> は、再起動時の瞬断が懸念されます。<br>大規模アクセスを捌く目的で利用する Go には向いていないと思います。</p>
<p><code>3. サーバでビルド</code> は、運用方法にもよりますが、<br>本番環境でコンフリクトが起きてしまったらコンパイルもストップしてしまう懸念があります。</p>
<p><code>1. ローカルビルド</code>方法を Jenkins で管理して運用しており<br>現状特に問題ないです。</p>
<p>Jenkins の設定等まとめてから公開したいと思います。</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/categories/Go/page/2/">前</a></div><div class="pagination-next is-invisible is-hidden-mobile"><a href="/categories/Go/page/4/">次</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/categories/Go/">1</a></li><li><a class="pagination-link" href="/categories/Go/page/2/">2</a></li><li><a class="pagination-link is-current" href="/categories/Go/page/3/">3</a></li></ul></nav></div><!--!--><div class="column column-right is-4-tablet is-4-desktop is-4-widescreen  order-3"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="kenzo0107"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">kenzo0107</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">投稿</p><a href="/archives"><p class="title">340</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">カテゴリ</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">タグ</p><a href="/tags"><p class="title">88</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/kenzo0107" target="_blank" rel="noopener">フォローする</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/kenzo0107"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com/kenzo0107"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">カテゴリ</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AWS/"><span class="level-start"><span class="level-item">AWS</span></span><span class="level-end"><span class="level-item tag">22</span></span></a></li><li><a class="level is-mobile" href="/categories/DIY/"><span class="level-start"><span class="level-item">DIY</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/GitHub/"><span class="level-start"><span class="level-item">GitHub</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Go/"><span class="level-start"><span class="level-item">Go</span></span><span class="level-end"><span class="level-item tag">26</span></span></a></li><li><a class="level is-mobile" href="/categories/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/RaspberryPI/"><span class="level-start"><span class="level-item">RaspberryPI</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/Terraform/"><span class="level-start"><span class="level-item">Terraform</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最近の記事</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-30T15:00:00.000Z">2023-12-01</time></p><p class="title"><a href="/2023/11/30/2023-12-01-show-running-aws-resources/">aws-cli で AWS 起動中のリソース一覧取得する</a></p><p class="categories"><a href="/categories/AWS/">AWS</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-11-06T15:00:00.000Z">2023-11-07</time></p><p class="title"><a href="/2023/11/06/2023-11-07-describe-ec2-specified-tag-key-value/">AWS CLI で EC2 インスタンス名一覧を取得</a></p><p class="categories"><a href="/categories/AWS/">AWS</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-20T15:00:00.000Z">2023-07-21</time></p><p class="title"><a href="/2023/07/20/2023-07-21-python-load-file/">python でファイルの内容を取得する</a></p><p class="categories"><a href="/categories/Python/">Python</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-13T15:00:00.000Z">2023-07-14</time></p><p class="title"><a href="/2023/07/13/2023-07-14-show-dependabot-pull-requests/">dependabot が pull request を作成しているか確認するスクリプト</a></p><p class="categories"><a href="/categories/GitHub/">GitHub</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-07-07T15:00:00.000Z">2023-07-08</time></p><p class="title"><a href="/2023/07/07/2023-07-08-install-terraform-multi-versions-by-asdf/">asdf で terraform 複数バージョン管理</a></p><p class="categories"><a href="/categories/AWS/">AWS</a></p></div></article></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">タグ</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/htaccess/"><span class="tag">.htaccess</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ALB/"><span class="tag">ALB</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AWS/"><span class="tag">AWS</span><span class="tag">43</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ansible/"><span class="tag">Ansible</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AntiVirus/"><span class="tag">AntiVirus</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Apache/"><span class="tag">Apache</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Chef/"><span class="tag">Chef</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CodeBuild/"><span class="tag">CodeBuild</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Cookie/"><span class="tag">Cookie</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Corosync/"><span class="tag">Corosync</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Datadog/"><span class="tag">Datadog</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ECR/"><span class="tag">ECR</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ECS/"><span class="tag">ECS</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ElastiCache/"><span class="tag">ElastiCache</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Elasticsearch/"><span class="tag">Elasticsearch</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Email/"><span class="tag">Email</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/FTPS/"><span class="tag">FTPS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Fluentd/"><span class="tag">Fluentd</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GKE/"><span class="tag">GKE</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GitHub-Actions/"><span class="tag">GitHub Actions</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Go/"><span class="tag">Go</span><span class="tag">24</span></a></div><div class="control"><a class="tags has-addons" href="/tags/GooglePlay/"><span class="tag">GooglePlay</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Hubot/"><span class="tag">Hubot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JavaScript/"><span class="tag">JavaScript</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Jenkins/"><span class="tag">Jenkins</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kibana/"><span class="tag">Kibana</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LINE-Notify/"><span class="tag">LINE Notify</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Lambda/"><span class="tag">Lambda</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Let-s-encrypt/"><span class="tag">Let&#039;s encrypt</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MachineLearning/"><span class="tag">MachineLearning</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Monitoring/"><span class="tag">Monitoring</span><span class="tag">12</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MySQL/"><span class="tag">MySQL</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Nginx/"><span class="tag">Nginx</span><span class="tag">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenSSL/"><span class="tag">OpenSSL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Outlook/"><span class="tag">Outlook</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PHP/"><span class="tag">PHP</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Pacemaker/"><span class="tag">Pacemaker</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Prometheus/"><span class="tag">Prometheus</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ProxySQL/"><span class="tag">ProxySQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Puppeteer/"><span class="tag">Puppeteer</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Rails/"><span class="tag">Rails</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RaspberryPI/"><span class="tag">RaspberryPI</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Reactio/"><span class="tag">Reactio</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Redis/"><span class="tag">Redis</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ruby/"><span class="tag">Ruby</span><span class="tag">10</span></a></div><div class="control"><a class="tags has-addons" href="/tags/S3/"><span class="tag">S3</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SSL/"><span class="tag">SSL</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Security/"><span class="tag">Security</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SendGrid/"><span class="tag">SendGrid</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Slack/"><span class="tag">Slack</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SonarQube/"><span class="tag">SonarQube</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/StatsBot/"><span class="tag">StatsBot</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Swift/"><span class="tag">Swift</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Terraform/"><span class="tag">Terraform</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Twilio/"><span class="tag">Twilio</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Unity/"><span class="tag">Unity</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vagrant/"><span class="tag">Vagrant</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Vault/"><span class="tag">Vault</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WAF/"><span class="tag">WAF</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Zabbix/"><span class="tag">Zabbix</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/awk/"><span class="tag">awk</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/casperjs/"><span class="tag">casperjs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/cpu/"><span class="tag">cpu</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/csv/"><span class="tag">csv</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/flask/"><span class="tag">flask</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/git/"><span class="tag">git</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/i-node/"><span class="tag">i-node</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iftop/"><span class="tag">iftop</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ipinfo/"><span class="tag">ipinfo</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/iptable/"><span class="tag">iptable</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kibana/"><span class="tag">kibana</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/macos/"><span class="tag">macos</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/nginx/"><span class="tag">nginx</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/no-ip/"><span class="tag">no-ip</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ping/"><span class="tag">ping</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/pip/"><span class="tag">pip</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/reCAPTCHA/"><span class="tag">reCAPTCHA</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sftp/"><span class="tag">sftp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/spam/"><span class="tag">spam</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ssh/"><span class="tag">ssh</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/vim/"><span class="tag">vim</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/wget/"><span class="tag">wget</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/yum/"><span class="tag">yum</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/zsh/"><span class="tag">zsh</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">更新を購読する</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="購読する"></div></div></form></div></div></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label">広告</h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6265337967545472" data-ad-slot="9975280607" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="長生村本郷Engineers&#039;Blog" height="28"></a><p class="is-size-7"><span>&copy; 2023 Kenzo Tanaka</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Privacy Policy" href="/2013/12/31/PrivacyPolicy/"><i class="fab fa-p"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ja");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="トップに戻る" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="何かを入力してください..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"何かを入力してください...","untitled":"(無題)","posts":"投稿","pages":"ページ","categories":"カテゴリ","tags":"タグ"});
        });</script></body></html>